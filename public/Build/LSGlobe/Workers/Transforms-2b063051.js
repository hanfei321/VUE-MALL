define(["exports","./defaultValue-bcb5baf7","./DeveloperError-b273b01a","./Check-f9a1a1be","./Math-588d98f6","./Cartesian2-10213add","./Rectangle-de996bfb","./Matrix4-c981b715","./RuntimeError-1b5fbc4d","./when-ae2a7552","./buildModuleUrl-cd6b3599"],function(e,T,t,n,d,P,o,c,f,l,m){"use strict";function a(e){this._ellipsoid=T.defaultValue(e,o.Ellipsoid.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(a.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),a.prototype.project=function(e,n){var t=this._semimajorAxis,a=e.longitude*t,t=e.latitude*t,e=e.height;return T.defined(n)?(n.x=a,n.y=t,n.z=e,n):new P.Cartesian3(a,t,e)},a.prototype.unproject=function(e,n){var t=this._oneOverSemimajorAxis,a=e.x*t,t=e.y*t,e=e.z;return T.defined(n)?(n.longitude=a,n.latitude=t,n.height=e,n):new P.Cartographic(a,t,e)};var r=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function A(e,n){this.center=P.Cartesian3.clone(T.defaultValue(e,P.Cartesian3.ZERO)),this.radius=T.defaultValue(n,0)}var R=new P.Cartesian3,z=new P.Cartesian3,I=new P.Cartesian3,N=new P.Cartesian3,b=new P.Cartesian3,U=new P.Cartesian3,F=new P.Cartesian3,q=new P.Cartesian3,W=new P.Cartesian3,V=new P.Cartesian3,L=new P.Cartesian3,k=new P.Cartesian3,i=4/3*d.CesiumMath.PI;A.fromPoints=function(e,n){if(T.defined(n)||(n=new A),!T.defined(e)||0===e.length)return n.center=P.Cartesian3.clone(P.Cartesian3.ZERO,n.center),n.radius=0,n;for(var t=P.Cartesian3.clone(e[0],F),a=P.Cartesian3.clone(t,R),r=P.Cartesian3.clone(t,z),i=P.Cartesian3.clone(t,I),s=P.Cartesian3.clone(t,N),o=P.Cartesian3.clone(t,b),u=P.Cartesian3.clone(t,U),l=e.length,d=1;d<l;d++){P.Cartesian3.clone(e[d],t);var c=t.x,f=t.y,m=t.z;c<a.x&&P.Cartesian3.clone(t,a),c>s.x&&P.Cartesian3.clone(t,s),f<r.y&&P.Cartesian3.clone(t,r),f>o.y&&P.Cartesian3.clone(t,o),m<i.z&&P.Cartesian3.clone(t,i),m>u.z&&P.Cartesian3.clone(t,u)}var p=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(s,a,q)),h=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(o,r,q)),C=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(u,i,q)),y=a,w=s,p=p;p<h&&(p=h,y=r,w=o),p<C&&(p=C,y=i,w=u);var x=W;x.x=.5*(y.x+w.x),x.y=.5*(y.y+w.y),x.z=.5*(y.z+w.z);var g=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(w,x,q)),E=Math.sqrt(g),y=V;y.x=a.x,y.y=r.y,y.z=i.z;w=L;w.x=s.x,w.y=o.y,w.z=u.z;var _=P.Cartesian3.midpoint(y,w,k),v=0;for(d=0;d<l;d++){P.Cartesian3.clone(e[d],t);var S=P.Cartesian3.magnitude(P.Cartesian3.subtract(t,_,q));v<S&&(v=S);var M=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(t,x,q));g<M&&(g=(E=.5*(E+(S=Math.sqrt(M))))*E,M=S-E,x.x=(E*x.x+M*t.x)/S,x.y=(E*x.y+M*t.y)/S,x.z=(E*x.z+M*t.z)/S)}return E<v?(P.Cartesian3.clone(x,n.center),n.radius=E):(P.Cartesian3.clone(_,n.center),n.radius=v),n};var s=new a,u=new P.Cartesian3,p=new P.Cartesian3,h=new P.Cartographic,C=new P.Cartographic;A.fromRectangle2D=function(e,n,t){return A.fromRectangleWithHeights2D(e,n,0,0,t)},A.fromRectangleWithHeights2D=function(e,n,t,a,r){if(T.defined(r)||(r=new A),!T.defined(e))return r.center=P.Cartesian3.clone(P.Cartesian3.ZERO,r.center),r.radius=0,r;n=T.defaultValue(n,s),o.Rectangle.southwest(e,h),h.height=t,o.Rectangle.northeast(e,C),C.height=a;var i=n.project(h,u),t=n.project(C,p),e=t.x-i.x,a=t.y-i.y,n=t.z-i.z;r.radius=.5*Math.sqrt(e*e+a*a+n*n);t=r.center;return t.x=i.x+.5*e,t.y=i.y+.5*a,t.z=i.z+.5*n,r};var y=[];A.fromRectangle3D=function(e,n,t,a){if(n=T.defaultValue(n,o.Ellipsoid.WGS84),t=T.defaultValue(t,0),T.defined(a)||(a=new A),!T.defined(e))return a.center=P.Cartesian3.clone(P.Cartesian3.ZERO,a.center),a.radius=0,a;t=o.Rectangle.subsample(e,n,t,y);return A.fromPoints(t,a)},A.fromVertices=function(e,n,t,a){if(T.defined(a)||(a=new A),!T.defined(e)||0===e.length)return a.center=P.Cartesian3.clone(P.Cartesian3.ZERO,a.center),a.radius=0,a;n=T.defaultValue(n,P.Cartesian3.ZERO),t=T.defaultValue(t,3);var r=F;r.x=e[0]+n.x,r.y=e[1]+n.y,r.z=e[2]+n.z;for(var i=P.Cartesian3.clone(r,R),s=P.Cartesian3.clone(r,z),o=P.Cartesian3.clone(r,I),u=P.Cartesian3.clone(r,N),l=P.Cartesian3.clone(r,b),d=P.Cartesian3.clone(r,U),c=e.length,f=0;f<c;f+=t){var m=e[f]+n.x,p=e[f+1]+n.y,h=e[f+2]+n.z;r.x=m,r.y=p,r.z=h,m<i.x&&P.Cartesian3.clone(r,i),m>u.x&&P.Cartesian3.clone(r,u),p<s.y&&P.Cartesian3.clone(r,s),p>l.y&&P.Cartesian3.clone(r,l),h<o.z&&P.Cartesian3.clone(r,o),h>d.z&&P.Cartesian3.clone(r,d)}var C=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(u,i,q)),y=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(l,s,q)),w=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(d,o,q)),x=i,g=u,C=C;C<y&&(C=y,x=s,g=l),C<w&&(C=w,x=o,g=d);var E=W;E.x=.5*(x.x+g.x),E.y=.5*(x.y+g.y),E.z=.5*(x.z+g.z);var _=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(g,E,q)),v=Math.sqrt(_),x=V;x.x=i.x,x.y=s.y,x.z=o.z;g=L;g.x=u.x,g.y=l.y,g.z=d.z;var S=P.Cartesian3.midpoint(x,g,k),M=0;for(f=0;f<c;f+=t){r.x=e[f]+n.x,r.y=e[f+1]+n.y,r.z=e[f+2]+n.z;var O=P.Cartesian3.magnitude(P.Cartesian3.subtract(r,S,q));M<O&&(M=O);var D=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(r,E,q));_<D&&(_=(v=.5*(v+(O=Math.sqrt(D))))*v,D=O-v,E.x=(v*E.x+D*r.x)/O,E.y=(v*E.y+D*r.y)/O,E.z=(v*E.z+D*r.z)/O)}return v<M?(P.Cartesian3.clone(E,a.center),a.radius=v):(P.Cartesian3.clone(S,a.center),a.radius=M),a},A.fromEncodedCartesianVertices=function(e,n,t){if(T.defined(t)||(t=new A),!T.defined(e)||!T.defined(n)||e.length!==n.length||0===e.length)return t.center=P.Cartesian3.clone(P.Cartesian3.ZERO,t.center),t.radius=0,t;var a=F;a.x=e[0]+n[0],a.y=e[1]+n[1],a.z=e[2]+n[2];for(var r=P.Cartesian3.clone(a,R),i=P.Cartesian3.clone(a,z),s=P.Cartesian3.clone(a,I),o=P.Cartesian3.clone(a,N),u=P.Cartesian3.clone(a,b),l=P.Cartesian3.clone(a,U),d=e.length,c=0;c<d;c+=3){var f=e[c]+n[c],m=e[c+1]+n[c+1],p=e[c+2]+n[c+2];a.x=f,a.y=m,a.z=p,f<r.x&&P.Cartesian3.clone(a,r),f>o.x&&P.Cartesian3.clone(a,o),m<i.y&&P.Cartesian3.clone(a,i),m>u.y&&P.Cartesian3.clone(a,u),p<s.z&&P.Cartesian3.clone(a,s),p>l.z&&P.Cartesian3.clone(a,l)}var h=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(o,r,q)),C=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(u,i,q)),y=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(l,s,q)),w=r,x=o,h=h;h<C&&(h=C,w=i,x=u),h<y&&(h=y,w=s,x=l);var g=W;g.x=.5*(w.x+x.x),g.y=.5*(w.y+x.y),g.z=.5*(w.z+x.z);var E=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(x,g,q)),_=Math.sqrt(E),w=V;w.x=r.x,w.y=i.y,w.z=s.z;x=L;x.x=o.x,x.y=u.y,x.z=l.z;var v=P.Cartesian3.midpoint(w,x,k),S=0;for(c=0;c<d;c+=3){a.x=e[c]+n[c],a.y=e[c+1]+n[c+1],a.z=e[c+2]+n[c+2];var M=P.Cartesian3.magnitude(P.Cartesian3.subtract(a,v,q));S<M&&(S=M);var O=P.Cartesian3.magnitudeSquared(P.Cartesian3.subtract(a,g,q));E<O&&(E=(_=.5*(_+(M=Math.sqrt(O))))*_,O=M-_,g.x=(_*g.x+O*a.x)/M,g.y=(_*g.y+O*a.y)/M,g.z=(_*g.z+O*a.z)/M)}return _<S?(P.Cartesian3.clone(g,t.center),t.radius=_):(P.Cartesian3.clone(v,t.center),t.radius=S),t},A.fromCornerPoints=function(e,n,t){T.defined(t)||(t=new A);e=P.Cartesian3.midpoint(e,n,t.center);return t.radius=P.Cartesian3.distance(e,n),t},A.fromEllipsoid=function(e,n){return T.defined(n)||(n=new A),P.Cartesian3.clone(P.Cartesian3.ZERO,n.center),n.radius=e.maximumRadius,n};var w=new P.Cartesian3;A.fromBoundingSpheres=function(e,n){if(T.defined(n)||(n=new A),!T.defined(e)||0===e.length)return n.center=P.Cartesian3.clone(P.Cartesian3.ZERO,n.center),n.radius=0,n;var t=e.length;if(1===t)return A.clone(e[0],n);if(2===t)return A.union(e[0],e[1],n);for(var a=[],r=0;r<t;r++)a.push(e[r].center);var i=(n=A.fromPoints(a,n)).center,s=n.radius;for(r=0;r<t;r++)var o=e[r],s=Math.max(s,P.Cartesian3.distance(i,o.center,w)+o.radius);return n.radius=s,n};var x=new P.Cartesian3,g=new P.Cartesian3,E=new P.Cartesian3;A.fromOrientedBoundingBox=function(e,n){T.defined(n)||(n=new A);var t=e.halfAxes,a=c.Matrix3.getColumn(t,0,x),r=c.Matrix3.getColumn(t,1,g),t=c.Matrix3.getColumn(t,2,E);return P.Cartesian3.add(a,r,a),P.Cartesian3.add(a,t,a),n.center=P.Cartesian3.clone(e.center,n.center),n.radius=P.Cartesian3.magnitude(a),n},A.clone=function(e,n){if(T.defined(e))return T.defined(n)?(n.center=P.Cartesian3.clone(e.center,n.center),n.radius=e.radius,n):new A(e.center,e.radius)},A.packedLength=4,A.pack=function(e,n,t){t=T.defaultValue(t,0);var a=e.center;return n[t++]=a.x,n[t++]=a.y,n[t++]=a.z,n[t]=e.radius,n},A.unpack=function(e,n,t){n=T.defaultValue(n,0),T.defined(t)||(t=new A);var a=t.center;return a.x=e[n++],a.y=e[n++],a.z=e[n++],t.radius=e[n],t};var _=new P.Cartesian3,v=new P.Cartesian3;A.union=function(e,n,t){T.defined(t)||(t=new A);var a=e.center,r=e.radius,i=n.center,s=n.radius,o=P.Cartesian3.subtract(i,a,_),i=P.Cartesian3.magnitude(o);if(i+s<=r)return e.clone(t),t;if(i+r<=s)return n.clone(t),t;s=.5*(r+i+s),i=P.Cartesian3.multiplyByScalar(o,(s-r)/i,v);return P.Cartesian3.add(i,a,i),P.Cartesian3.clone(i,t.center),t.radius=s,t};var S=new P.Cartesian3;A.expand=function(e,n,t){t=A.clone(e,t);n=P.Cartesian3.magnitude(P.Cartesian3.subtract(n,t.center,S));return n>t.radius&&(t.radius=n),t},A.intersectPlane=function(e,n){var t=e.center,a=e.radius,e=n.normal,n=P.Cartesian3.dot(e,t)+n.distance;return n<-a?r.OUTSIDE:n<a?r.INTERSECTING:r.INSIDE},A.transform=function(e,n,t){return T.defined(t)||(t=new A),t.center=c.Matrix4.multiplyByPoint(n,e.center,t.center),t.radius=c.Matrix4.getMaximumScale(n)*e.radius,t};var M=new P.Cartesian3;A.distanceSquaredTo=function(e,n){n=P.Cartesian3.subtract(e.center,n,M);return P.Cartesian3.magnitudeSquared(n)-e.radius*e.radius},A.transformWithoutScale=function(e,n,t){return T.defined(t)||(t=new A),t.center=c.Matrix4.multiplyByPoint(n,e.center,t.center),t.radius=e.radius,t};var O=new P.Cartesian3;A.computePlaneDistances=function(e,n,t,a){T.defined(a)||(a=new c.Interval);n=P.Cartesian3.subtract(e.center,n,O),n=P.Cartesian3.dot(t,n);return a.start=n-e.radius,a.stop=n+e.radius,a};for(var D=new P.Cartesian3,B=new P.Cartesian3,j=new P.Cartesian3,Z=new P.Cartesian3,Y=new P.Cartesian3,G=new P.Cartographic,X=new Array(8),J=0;J<8;++J)X[J]=new P.Cartesian3;var H,Q=new a;A.projectTo2D=function(e,n,t){var a=(n=T.defaultValue(n,Q)).ellipsoid,r=e.center,i=e.radius,s=P.Cartesian3.equals(r,P.Cartesian3.ZERO)?P.Cartesian3.clone(P.Cartesian3.UNIT_X,D):a.geodeticSurfaceNormal(r,D),o=P.Cartesian3.cross(P.Cartesian3.UNIT_Z,s,B);P.Cartesian3.normalize(o,o);var u=P.Cartesian3.cross(s,o,j);P.Cartesian3.normalize(u,u),P.Cartesian3.multiplyByScalar(s,i,s),P.Cartesian3.multiplyByScalar(u,i,u),P.Cartesian3.multiplyByScalar(o,i,o);var l=P.Cartesian3.negate(u,Y),e=P.Cartesian3.negate(o,Z),d=X,i=d[0];P.Cartesian3.add(s,u,i),P.Cartesian3.add(i,o,i),i=d[1],P.Cartesian3.add(s,u,i),P.Cartesian3.add(i,e,i),i=d[2],P.Cartesian3.add(s,l,i),P.Cartesian3.add(i,e,i),i=d[3],P.Cartesian3.add(s,l,i),P.Cartesian3.add(i,o,i),P.Cartesian3.negate(s,s),i=d[4],P.Cartesian3.add(s,u,i),P.Cartesian3.add(i,o,i),i=d[5],P.Cartesian3.add(s,u,i),P.Cartesian3.add(i,e,i),i=d[6],P.Cartesian3.add(s,l,i),P.Cartesian3.add(i,e,i),i=d[7],P.Cartesian3.add(s,l,i),P.Cartesian3.add(i,o,i);for(var c=d.length,f=0;f<c;++f){var m=d[f];P.Cartesian3.add(r,m,m);var p=a.cartesianToCartographic(m,G);n.project(p,m)}l=(r=(t=A.fromPoints(d,t)).center).x,o=r.y,i=r.z;return r.x=i,r.y=l,r.z=o,t},A.isOccluded=function(e,n){return!n.isBoundingSphereVisible(e)},A.equals=function(e,n){return e===n||T.defined(e)&&T.defined(n)&&P.Cartesian3.equals(e.center,n.center)&&e.radius===n.radius},A.prototype.intersectPlane=function(e){return A.intersectPlane(this,e)},A.prototype.distanceSquaredTo=function(e){return A.distanceSquaredTo(this,e)},A.prototype.computePlaneDistances=function(e,n,t){return A.computePlaneDistances(this,e,n,t)},A.prototype.isOccluded=function(e){return A.isOccluded(this,e)},A.prototype.equals=function(e){return A.equals(this,e)},A.prototype.clone=function(e){return A.clone(this,e)},A.prototype.volume=function(){var e=this.radius;return i*e*e*e};var $,K,ee,ne,te,ae,re,ie,se,oe,ue,le,de,ce,fe,me,pe,he={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},Ce={};function ye(e){for(var n=e.split("."),t=0,a=n.length;t<a;++t)n[t]=parseInt(n[t],10);return n}function we(){var e;return T.defined(K)||(K=!1,_e()||null!==(e=/ Chrome\/([\.0-9]+)/.exec($.userAgent))&&(K=!0,ee=ye(e[1]))),K}function xe(){var e;return T.defined(ne)||(ne=!1,we()||_e()||!/ Safari\/[\.0-9]+/.test($.userAgent)||null!==(e=/ Version\/([\.0-9]+)/.exec($.userAgent))&&(ne=!0,te=ye(e[1]))),ne}function ge(){var e;return T.defined(ae)||(ae=!1,null!==(e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec($.userAgent))&&(ae=!0,(re=ye(e[1])).isNightly=!!e[2])),ae}function Ee(){var e;return T.defined(ie)||(ie=!1,"Microsoft Internet Explorer"===$.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec($.userAgent))&&(ie=!0,se=ye(e[1])):"Netscape"===$.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec($.userAgent))&&(ie=!0,se=ye(e[1]))),ie}function _e(){var e;return T.defined(oe)||(oe=!1,null!==(e=/ Edge\/([\.0-9]+)/.exec($.userAgent))&&(oe=!0,ue=ye(e[1]))),oe}function ve(){var e;return T.defined(le)||(le=!1,null!==(e=/Firefox\/([\.0-9]+)/.exec($.userAgent))&&(le=!0,de=ye(e[1]))),le}function Se(){var e;return T.defined(pe)||((e=document.createElement("canvas")).setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;"),e=e.style.imageRendering,(pe=T.defined(e)&&""!==e)&&(me=e)),pe}function Me(){return Me._result}Object.defineProperties(Ce,{element:{get:function(){if(Ce.supportsFullscreen())return document[he.fullscreenElement]}},changeEventName:{get:function(){if(Ce.supportsFullscreen())return he.fullscreenchange}},errorEventName:{get:function(){if(Ce.supportsFullscreen())return he.fullscreenerror}},enabled:{get:function(){if(Ce.supportsFullscreen())return document[he.fullscreenEnabled]}},fullscreen:{get:function(){if(Ce.supportsFullscreen())return null!==Ce.element}}}),Ce.supportsFullscreen=function(){if(T.defined(H))return H;H=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return he.requestFullscreen="requestFullscreen",he.exitFullscreen="exitFullscreen",he.fullscreenEnabled="fullscreenEnabled",he.fullscreenElement="fullscreenElement",he.fullscreenchange="fullscreenchange",he.fullscreenerror="fullscreenerror",H=!0;for(var n=["webkit","moz","o","ms","khtml"],t=0,a=n.length;t<a;++t){var r,i=n[t];"function"!=typeof e[r=i+"RequestFullscreen"]&&"function"!=typeof e[r=i+"RequestFullScreen"]||(he.requestFullscreen=r,H=!0),r=i+"ExitFullscreen","function"==typeof document[r]?he.exitFullscreen=r:(r=i+"CancelFullScreen","function"==typeof document[r]&&(he.exitFullscreen=r)),r=i+"FullscreenEnabled",void 0!==document[r]?he.fullscreenEnabled=r:(r=i+"FullScreenEnabled",void 0!==document[r]&&(he.fullscreenEnabled=r)),r=i+"FullscreenElement",void 0!==document[r]?he.fullscreenElement=r:(r=i+"FullScreenElement",void 0!==document[r]&&(he.fullscreenElement=r)),r=i+"fullscreenchange",void 0!==document["on"+r]&&("ms"===i&&(r="MSFullscreenChange"),he.fullscreenchange=r),r=i+"fullscreenerror",void 0!==document["on"+r]&&("ms"===i&&(r="MSFullscreenError"),he.fullscreenerror=r)}return H},Ce.requestFullscreen=function(e,n){Ce.supportsFullscreen()&&e[he.requestFullscreen]({vrDisplay:n})},Ce.exitFullscreen=function(){Ce.supportsFullscreen()&&document[he.exitFullscreen]()},Ce._names=he,$="undefined"!=typeof navigator?navigator:{},Me._promise=void 0,Me._result=void 0,Me.initialize=function(){if(T.defined(Me._promise))return Me._promise;var e=l.when.defer();if(Me._promise=e.promise,_e())return Me._result=!1,e.resolve(Me._result),e.promise;var n=new Image;return n.onload=function(){Me._result=0<n.width&&0<n.height,e.resolve(Me._result)},n.onerror=function(){Me._result=!1,e.resolve(Me._result)},n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.promise},Object.defineProperties(Me,{initialized:{get:function(){return T.defined(Me._result)}}});var Oe=[];"undefined"!=typeof ArrayBuffer&&(Oe.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&Oe.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&Oe.push(Uint8ClampedArray));var De={isChrome:we,chromeVersion:function(){return we()&&ee},isSafari:xe,safariVersion:function(){return xe()&&te},isWebkit:ge,webkitVersion:function(){return ge()&&re},isInternetExplorer:Ee,internetExplorerVersion:function(){return Ee()&&se},isEdge:_e,edgeVersion:function(){return _e()&&ue},isFirefox:ve,firefoxVersion:function(){return ve()&&de},isWindows:function(){return T.defined(ce)||(ce=/Windows/i.test($.appVersion)),ce},hardwareConcurrency:T.defaultValue($.hardwareConcurrency,3),supportsPointerEvents:function(){return T.defined(fe)||(fe=!1),fe},supportsImageRenderingPixelated:Se,supportsWebP:Me,imageRenderingValue:function(){return Se()?me:void 0},typedArrayTypes:Oe};function Te(e,n,t,a){this.x=T.defaultValue(e,0),this.y=T.defaultValue(n,0),this.z=T.defaultValue(t,0),this.w=T.defaultValue(a,0)}De.supportsFullscreen=function(){return Ce.supportsFullscreen()},De.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},De.supportsWebWorkers=function(){return"undefined"!=typeof Worker},De.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!De.isEdge()};var Pe=new P.Cartesian3;Te.fromAxisAngle=function(e,n,t){var a=n/2,r=Math.sin(a),n=(Pe=P.Cartesian3.normalize(e,Pe)).x*r,e=Pe.y*r,r=Pe.z*r,a=Math.cos(a);return T.defined(t)?(t.x=n,t.y=e,t.z=r,t.w=a,t):new Te(n,e,r,a)};var Ae=[1,2,0],Re=new Array(3);Te.fromRotationMatrix=function(e,n){var t,a,r,i,s=e[c.Matrix3.COLUMN0ROW0],o=e[c.Matrix3.COLUMN1ROW1],u=e[c.Matrix3.COLUMN2ROW2],l=s+o+u,d=0<l?(r=.5*(i=Math.sqrt(l+1)),i=.5/i,t=(e[c.Matrix3.COLUMN1ROW2]-e[c.Matrix3.COLUMN2ROW1])*i,a=(e[c.Matrix3.COLUMN2ROW0]-e[c.Matrix3.COLUMN0ROW2])*i,(e[c.Matrix3.COLUMN0ROW1]-e[c.Matrix3.COLUMN1ROW0])*i):(o=Ae[s=Ae[u=s<u&&o<u?2:s<o?1:0]],i=Math.sqrt(e[c.Matrix3.getElementIndex(u,u)]-e[c.Matrix3.getElementIndex(s,s)]-e[c.Matrix3.getElementIndex(o,o)]+1),(d=Re)[u]=.5*i,i=.5/i,r=(e[c.Matrix3.getElementIndex(o,s)]-e[c.Matrix3.getElementIndex(s,o)])*i,d[s]=(e[c.Matrix3.getElementIndex(s,u)]+e[c.Matrix3.getElementIndex(u,s)])*i,d[o]=(e[c.Matrix3.getElementIndex(o,u)]+e[c.Matrix3.getElementIndex(u,o)])*i,t=-d[0],a=-d[1],-d[2]);return T.defined(n)?(n.x=t,n.y=a,n.z=d,n.w=r,n):new Te(t,a,d,r)};var ze=new Te,Ie=new Te,Ne=new Te,be=new Te;Te.fromHeadingPitchRoll=function(e,n){return be=Te.fromAxisAngle(P.Cartesian3.UNIT_X,e.roll,ze),Ne=Te.fromAxisAngle(P.Cartesian3.UNIT_Y,-e.pitch,n),n=Te.multiply(Ne,be,Ne),Ie=Te.fromAxisAngle(P.Cartesian3.UNIT_Z,-e.heading,ze),Te.multiply(Ie,n,n)};var Ue=new P.Cartesian3,Fe=new P.Cartesian3,qe=new Te,We=new Te,Ve=new Te;Te.packedLength=4,Te.pack=function(e,n,t){return t=T.defaultValue(t,0),n[t++]=e.x,n[t++]=e.y,n[t++]=e.z,n[t]=e.w,n},Te.unpack=function(e,n,t){return n=T.defaultValue(n,0),T.defined(t)||(t=new Te),t.x=e[n],t.y=e[n+1],t.z=e[n+2],t.w=e[n+3],t},Te.packedInterpolationLength=3,Te.convertPackedArrayForInterpolation=function(e,n,t,a){Te.unpack(e,4*t,Ve),Te.conjugate(Ve,Ve);for(var r=0,i=t-n+1;r<i;r++){var s=3*r;Te.unpack(e,4*(n+r),qe),Te.multiply(qe,Ve,qe),qe.w<0&&Te.negate(qe,qe),Te.computeAxis(qe,Ue);var o=Te.computeAngle(qe);T.defined(a)||(a=[]),a[s]=Ue.x*o,a[1+s]=Ue.y*o,a[2+s]=Ue.z*o}},Te.unpackInterpolationResult=function(e,n,t,a,r){T.defined(r)||(r=new Te),P.Cartesian3.fromArray(e,0,Fe);e=P.Cartesian3.magnitude(Fe);return Te.unpack(n,4*a,We),0===e?Te.clone(Te.IDENTITY,qe):Te.fromAxisAngle(Fe,e,qe),Te.multiply(qe,We,r)},Te.clone=function(e,n){if(T.defined(e))return T.defined(n)?(n.x=e.x,n.y=e.y,n.z=e.z,n.w=e.w,n):new Te(e.x,e.y,e.z,e.w)},Te.conjugate=function(e,n){return n.x=-e.x,n.y=-e.y,n.z=-e.z,n.w=e.w,n},Te.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},Te.magnitude=function(e){return Math.sqrt(Te.magnitudeSquared(e))},Te.normalize=function(e,n){var t=1/Te.magnitude(e),a=e.x*t,r=e.y*t,i=e.z*t,t=e.w*t;return n.x=a,n.y=r,n.z=i,n.w=t,n},Te.inverse=function(e,n){var t=Te.magnitudeSquared(e);return n=Te.conjugate(e,n),Te.multiplyByScalar(n,1/t,n)},Te.add=function(e,n,t){return t.x=e.x+n.x,t.y=e.y+n.y,t.z=e.z+n.z,t.w=e.w+n.w,t},Te.subtract=function(e,n,t){return t.x=e.x-n.x,t.y=e.y-n.y,t.z=e.z-n.z,t.w=e.w-n.w,t},Te.negate=function(e,n){return n.x=-e.x,n.y=-e.y,n.z=-e.z,n.w=-e.w,n},Te.dot=function(e,n){return e.x*n.x+e.y*n.y+e.z*n.z+e.w*n.w},Te.multiply=function(e,n,t){var a=e.x,r=e.y,i=e.z,s=e.w,o=n.x,u=n.y,l=n.z,d=n.w,c=s*o+a*d+r*l-i*u,e=s*u-a*l+r*d+i*o,n=s*l+a*u-r*o+i*d,l=s*d-a*o-r*u-i*l;return t.x=c,t.y=e,t.z=n,t.w=l,t},Te.multiplyByScalar=function(e,n,t){return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=e.w*n,t},Te.divideByScalar=function(e,n,t){return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t.w=e.w/n,t},Te.computeAxis=function(e,n){var t=e.w;if(Math.abs(t-1)<d.CesiumMath.EPSILON6)return n.x=n.y=n.z=0,n;t=1/Math.sqrt(1-t*t);return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n},Te.computeAngle=function(e){return Math.abs(e.w-1)<d.CesiumMath.EPSILON6?0:2*Math.acos(e.w)};var Le=new Te;Te.lerp=function(e,n,t,a){return Le=Te.multiplyByScalar(n,t,Le),a=Te.multiplyByScalar(e,1-t,a),Te.add(Le,a,a)};var ke=new Te,Be=new Te,je=new Te;Te.slerp=function(e,n,t,a){var r=Te.dot(e,n),i=n;if(r<0&&(r=-r,i=ke=Te.negate(n,ke)),1-r<d.CesiumMath.EPSILON6)return Te.lerp(e,i,t,a);r=Math.acos(r);return Be=Te.multiplyByScalar(e,Math.sin((1-t)*r),Be),je=Te.multiplyByScalar(i,Math.sin(t*r),je),a=Te.add(Be,je,a),Te.multiplyByScalar(a,1/Math.sin(r),a)},Te.log=function(e,n){var t=d.CesiumMath.acosClamped(e.w),a=0;return 0!==t&&(a=t/Math.sin(t)),P.Cartesian3.multiplyByScalar(e,a,n)},Te.exp=function(e,n){var t=P.Cartesian3.magnitude(e),a=0;return 0!==t&&(a=Math.sin(t)/t),n.x=e.x*a,n.y=e.y*a,n.z=e.z*a,n.w=Math.cos(t),n};var Ze=new P.Cartesian3,Ye=new P.Cartesian3,Ge=new Te,Xe=new Te;Te.computeInnerQuadrangle=function(e,n,t,a){var r=Te.conjugate(n,Ge);Te.multiply(r,t,Xe);t=Te.log(Xe,Ze);Te.multiply(r,e,Xe);e=Te.log(Xe,Ye);return P.Cartesian3.add(t,e,t),P.Cartesian3.multiplyByScalar(t,.25,t),P.Cartesian3.negate(t,t),Te.exp(t,Ge),Te.multiply(n,Ge,a)},Te.squad=function(e,n,t,a,r,i){n=Te.slerp(e,n,r,Ge),a=Te.slerp(t,a,r,Xe);return Te.slerp(n,a,2*r*(1-r),i)};for(var Je=new Te,Oe=1.9011074535173003,He=De.supportsTypedArrays()?new Float32Array(8):[],Qe=De.supportsTypedArrays()?new Float32Array(8):[],$e=De.supportsTypedArrays()?new Float32Array(8):[],Ke=De.supportsTypedArrays()?new Float32Array(8):[],en=0;en<7;++en){var nn=en+1,tn=2*nn+1;He[en]=1/(nn*tn),Qe[en]=nn/tn}function an(e,n,t){for(var a,r,i=0,s=e.length-1;i<=s;)if((r=t(e[a=~~((i+s)/2)],n))<0)i=1+a;else{if(!(0<r))return a;s=a-1}return~(s+1)}function rn(e,n,t,a,r){this.xPoleWander=e,this.yPoleWander=n,this.xPoleOffset=t,this.yPoleOffset=a,this.ut1MinusUtc=r}function sn(){function x(e,n,t,a){return t=t||" ",t=e.length>=n?"":Array(1+n-e.length>>>0).join(t),a?e+t:t+e}function g(e,n,t,a,r,i){var s=a-e.length;return 0<s&&(e=t||!r?x(e,a,i,t):e.slice(0,n.length)+x("",s,"0",!0)+e.slice(n.length)),e}function E(e,n,t,a,r,i,s){var o=e>>>0;return e=(t=t&&o&&{2:"0b",8:"0",16:"0x"}[n]||"")+x(o.toString(n),i||0,"0",!1),g(e,t,a,r,s)}function _(e,n,t,a,r,i){return null!=a&&(e=e.slice(0,a)),g(e,"",n,t,r,i)}var v=arguments,S=0,e=v[S++];return e.replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(e,n,t,a,r,i,s){var o,u,l,d,c;if("%%"==e)return"%";for(var f=!1,m="",p=!1,h=!1,C=" ",y=t.length,w=0;t&&w<y;w++)switch(t.charAt(w)){case" ":m=" ";break;case"+":m="+";break;case"-":f=!0;break;case"'":C=t.charAt(w+1);break;case"0":p=!0;break;case"#":h=!0}if((a=a?"*"==a?+v[S++]:"*"==a.charAt(0)?+v[a.slice(1,-1)]:+a:0)<0&&(a=-a,f=!0),!isFinite(a))throw new Error("sprintf: (minimum-)width must be finite");switch(i=i?"*"==i?+v[S++]:"*"==i.charAt(0)?+v[i.slice(1,-1)]:+i:-1<"fFeE".indexOf(s)?6:"d"==s?0:void 0,c=n?v[n.slice(0,-1)]:v[S++],s){case"s":return _(String(c),f,a,i,p,C);case"c":return _(String.fromCharCode(+c),f,a,i,p);case"b":return E(c,2,h,f,a,i,p);case"o":return E(c,8,h,f,a,i,p);case"x":return E(c,16,h,f,a,i,p);case"X":return E(c,16,h,f,a,i,p).toUpperCase();case"u":return E(c,10,h,f,a,i,p);case"i":case"d":return o=+c||0,c=(u=(o=Math.round(o-o%1))<0?"-":m)+x(String(Math.abs(o)),i,"0",!1),g(c,u,f,a,p);case"e":case"E":case"f":case"F":case"g":case"G":return u=(o=+c)<0?"-":m,l=["toExponential","toFixed","toPrecision"]["efg".indexOf(s.toLowerCase())],d=["toString","toUpperCase"]["eEfFgG".indexOf(s)%2],c=u+Math.abs(o)[l](i),g(c,u,f,a,p)[d]();default:return e}})}function on(e,n,t,a,r,i,s,o){this.year=e,this.month=n,this.day=t,this.hour=a,this.minute=r,this.second=i,this.millisecond=s,this.isLeapSecond=o}function un(e){return e%4==0&&e%100!=0||e%400==0}function ln(e,n){this.julianDate=e,this.offset=n}He[7]=Oe/136,Qe[7]=8*Oe/17,Te.fastSlerp=function(e,n,t,a){var r,i=Te.dot(e,n);0<=i?r=1:(r=-1,i=-i);for(var s=i-1,i=1-t,o=t*t,u=i*i,l=7;0<=l;--l)$e[l]=(He[l]*o-Qe[l])*s,Ke[l]=(He[l]*u-Qe[l])*s;t=r*t*(1+$e[0]*(1+$e[1]*(1+$e[2]*(1+$e[3]*(1+$e[4]*(1+$e[5]*(1+$e[6]*(1+$e[7])))))))),i*=1+Ke[0]*(1+Ke[1]*(1+Ke[2]*(1+Ke[3]*(1+Ke[4]*(1+Ke[5]*(1+Ke[6]*(1+Ke[7]))))))),i=Te.multiplyByScalar(e,i,Je);return Te.multiplyByScalar(n,t,a),Te.add(i,a,a)},Te.fastSquad=function(e,n,t,a,r,i){n=Te.fastSlerp(e,n,r,Ge),a=Te.fastSlerp(t,a,r,Xe);return Te.fastSlerp(n,a,2*r*(1-r),i)},Te.equals=function(e,n){return e===n||T.defined(e)&&T.defined(n)&&e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w},Te.equalsEpsilon=function(e,n,t){return t=T.defaultValue(t,0),e===n||T.defined(e)&&T.defined(n)&&Math.abs(e.x-n.x)<=t&&Math.abs(e.y-n.y)<=t&&Math.abs(e.z-n.z)<=t&&Math.abs(e.w-n.w)<=t},Te.ZERO=Object.freeze(new Te(0,0,0,0)),Te.IDENTITY=Object.freeze(new Te(0,0,0,1)),Te.prototype.clone=function(e){return Te.clone(this,e)},Te.prototype.equals=function(e){return Te.equals(this,e)},Te.prototype.equalsEpsilon=function(e,n){return Te.equalsEpsilon(this,e,n)},Te.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var dn=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),cn=Object.freeze({UTC:0,TAI:1}),fn=new on,mn=[31,28,31,30,31,30,31,31,30,31,30,31];function pn(e,n){return Tn.compare(e.julianDate,n.julianDate)}var hn=new ln;function Cn(e){hn.julianDate=e;var n=Tn.leapSeconds,t=an(n,hn,pn);t<0&&(t=~t),t>=n.length&&(t=n.length-1);var a=n[t].offset;0<t&&a<Tn.secondsDifference(n[t].julianDate,e)&&(a=n[--t].offset),Tn.addSeconds(e,a,e)}function yn(e,n){hn.julianDate=e;var t=Tn.leapSeconds,a=an(t,hn,pn);if(a<0&&(a=~a),0===a)return Tn.addSeconds(e,-t[0].offset,n);if(a>=t.length)return Tn.addSeconds(e,-t[a-1].offset,n);var r=Tn.secondsDifference(t[a].julianDate,e);return 0===r?Tn.addSeconds(e,-t[a].offset,n):r<=1?void 0:Tn.addSeconds(e,-t[--a].offset,n)}function wn(e,n,t){var a=n/dn.SECONDS_PER_DAY|0;return e+=a,(n-=dn.SECONDS_PER_DAY*a)<0&&(e--,n+=dn.SECONDS_PER_DAY),t.dayNumber=e,t.secondsOfDay=n,t}function xn(e,n,t,a,r,i,s){var o=(n-14)/12|0,e=e+4800+o,t=(1461*e/4|0)+(367*(n-2-12*o)/12|0)-(3*((e+100)/100|0)/4|0)+t-32075;(a-=12)<0&&(a+=24);s=i+(a*dn.SECONDS_PER_HOUR+r*dn.SECONDS_PER_MINUTE+s*dn.SECONDS_PER_MILLISECOND);return 43200<=s&&--t,[t,s]}var gn=/^(\d{4})$/,En=/^(\d{4})-(\d{2})$/,_n=/^(\d{4})-?(\d{3})$/,vn=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,Sn=/^(\d{4})-?(\d{2})-?(\d{2})$/,Oe=/([Z+\-])?(\d{2})?:?(\d{2})?$/,Mn=/^(\d{2})(\.\d+)?/.source+Oe.source,On=/^(\d{2}):?(\d{2})(\.\d+)?/.source+Oe.source,Dn=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+Oe.source;function Tn(e,n,t){this.dayNumber=void 0,this.secondsOfDay=void 0,e=T.defaultValue(e,0),n=T.defaultValue(n,0),t=T.defaultValue(t,cn.UTC);var a=0|e;wn(a,n+=(e-a)*dn.SECONDS_PER_DAY,this),t===cn.UTC&&Cn(this)}Tn.fromGregorianDate=function(e,n){e=xn(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return T.defined(n)?(wn(e[0],e[1],n),Cn(n),n):new Tn(e[0],e[1],cn.UTC)},Tn.fromDate=function(e,n){e=xn(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return T.defined(n)?(wn(e[0],e[1],n),Cn(n),n):new Tn(e[0],e[1],cn.UTC)},Tn.fromIso8601=function(e,n){var t,a,r,i,s,o=(e=e.replace(",",".")).split("T"),u=1,l=1,d=0,c=0,f=0,m=0,p=o[0],e=o[1];if(null!==(o=p.match(Sn))?(t=+o[1],u=+o[2],l=+o[3]):null!==(o=p.match(En))?(t=+o[1],u=+o[2]):null!==(o=p.match(gn))?t=+o[1]:(null!==(o=p.match(_n))?(t=+o[1],i=+o[2],r=un(t)):null!==(o=p.match(vn))&&(t=+o[1],i=7*+o[2]+(+o[3]||0)-new Date(Date.UTC(t,0,4)).getUTCDay()-3),(a=new Date(Date.UTC(t,0,1))).setUTCDate(i),u=a.getUTCMonth()+1,l=a.getUTCDate()),r=un(t),T.defined(e)){null!==(o=e.match(Dn))?(d=+o[1],c=+o[2],f=+o[3],m=1e3*+(o[4]||0),s=5):null!==(o=e.match(On))?(d=+o[1],c=+o[2],f=60*+(o[3]||0),s=4):null!==(o=e.match(Mn))&&(d=+o[1],c=60*+(o[2]||0),s=3);var h=o[s],C=+o[s+1],y=+(o[s+2]||0);switch(h){case"+":d-=C,c-=y;break;case"-":d+=C,c+=y;break;case"Z":break;default:c+=new Date(Date.UTC(t,u-1,l,d,c)).getTimezoneOffset()}}h=60===f;for(h&&f--;60<=c;)c-=60,d++;for(;24<=d;)d-=24,l++;for(a=r&&2===u?29:mn[u-1];a<l;)l-=a,12<++u&&(u-=12,t++),a=r&&2===u?29:mn[u-1];for(;c<0;)c+=60,d--;for(;d<0;)d+=24,l--;for(;l<1;)--u<1&&(u+=12,t--),l+=a=r&&2===u?29:mn[u-1];m=xn(t,u,l,d,c,f,m);return T.defined(n)?(wn(m[0],m[1],n),Cn(n)):n=new Tn(m[0],m[1],cn.UTC),h&&Tn.addSeconds(n,1,n),n},Tn.now=function(e){return Tn.fromDate(new Date,e)};var Pn=new Tn(0,0,cn.TAI);function An(e){var n,t;e=T.defaultValue(e,T.defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=T.defaultValue(e.addNewLeapSeconds,!0),T.defined(e.data)?zn(this,e.data):T.defined(e.url)?(n=m.Resource.createIfNeeded(e.url),(t=this)._downloadPromise=n.fetchJson().then(function(e){zn(t,e)}).otherwise(function(){t._dataError="An error occurred while retrieving the EOP data from the URL "+n.url+"."})):zn(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function Rn(e,n){return Tn.compare(e.julianDate,n)}function zn(e,n){if(T.defined(n.columnNames))if(T.defined(n.samples)){var t=n.columnNames.indexOf("modifiedJulianDateUtc"),a=n.columnNames.indexOf("xPoleWanderRadians"),r=n.columnNames.indexOf("yPoleWanderRadians"),i=n.columnNames.indexOf("ut1MinusUtcSeconds"),s=n.columnNames.indexOf("xCelestialPoleOffsetRadians"),o=n.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=n.columnNames.indexOf("taiMinusUtcSeconds");if(t<0||a<0||r<0||i<0||s<0||o<0||u<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var l,d=e._samples=n.samples,c=e._dates=[];e._dateColumn=t,e._xPoleWanderRadiansColumn=a,e._yPoleWanderRadiansColumn=r,e._ut1MinusUtcSecondsColumn=i,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=o,e._taiMinusUtcSecondsColumn=u,e._columnCount=n.columnNames.length,e._lastIndex=void 0;for(var f=e._addNewLeapSeconds,m=0,p=d.length;m<p;m+=e._columnCount){var h,C=d[m+t],y=d[m+u],w=new Tn(C+dn.MODIFIED_JULIAN_DATE_DIFFERENCE,y,cn.TAI);c.push(w),f&&(y===l||!T.defined(l)||(C=an(h=Tn.leapSeconds,w,Rn))<0&&(w=new ln(w,y),h.splice(~C,0,w)),l=y)}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function In(e,n,t,a,r){a*=t;r.xPoleWander=n[a+e._xPoleWanderRadiansColumn],r.yPoleWander=n[a+e._yPoleWanderRadiansColumn],r.xPoleOffset=n[a+e._xCelestialPoleOffsetRadiansColumn],r.yPoleOffset=n[a+e._yCelestialPoleOffsetRadiansColumn],r.ut1MinusUtc=n[a+e._ut1MinusUtcSecondsColumn]}function Nn(e,n,t){return n+e*(t-n)}function bn(e,n,t,a,r,i,s){var o=e._columnCount;if(i>n.length-1)return s.xPoleWander=0,s.yPoleWander=0,s.xPoleOffset=0,s.yPoleOffset=0,s.ut1MinusUtc=0,s;var u=n[r],l=n[i];if(u.equals(l)||a.equals(u))return In(e,t,r,o,s),s;if(a.equals(l))return In(e,t,i,o,s),s;var d=Tn.secondsDifference(a,u)/Tn.secondsDifference(l,u),c=r*o,n=i*o,u=t[c+e._ut1MinusUtcSecondsColumn],r=t[n+e._ut1MinusUtcSecondsColumn],i=r-u;return!(.5<i||i<-.5)||(o=t[c+e._taiMinusUtcSecondsColumn])!==(i=t[n+e._taiMinusUtcSecondsColumn])&&(l.equals(a)?u=r:r-=i-o),s.xPoleWander=Nn(d,t[c+e._xPoleWanderRadiansColumn],t[n+e._xPoleWanderRadiansColumn]),s.yPoleWander=Nn(d,t[c+e._yPoleWanderRadiansColumn],t[n+e._yPoleWanderRadiansColumn]),s.xPoleOffset=Nn(d,t[c+e._xCelestialPoleOffsetRadiansColumn],t[n+e._xCelestialPoleOffsetRadiansColumn]),s.yPoleOffset=Nn(d,t[c+e._yCelestialPoleOffsetRadiansColumn],t[n+e._yCelestialPoleOffsetRadiansColumn]),s.ut1MinusUtc=Nn(d,u,r),s}function Un(e,n,t){this.heading=T.defaultValue(e,0),this.pitch=T.defaultValue(n,0),this.roll=T.defaultValue(t,0)}function Fn(e,n,t){this.x=e,this.y=n,this.s=t}function qn(e){e=T.defaultValue(e,T.defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=m.Resource.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=T.defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=T.defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new Tn(this._sampleZeroJulianEphemerisDate,0,cn.TAI),this._stepSizeDays=T.defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=T.defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=T.defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var n=this._interpolationOrder,t=this._denominators=new Array(n+1),a=this._xTable=new Array(n+1),r=Math.pow(this._stepSizeDays,n),i=0;i<=n;++i){t[i]=r,a[i]=i*this._stepSizeDays;for(var s=0;s<=n;++s)s!==i&&(t[i]*=i-s);t[i]=1/t[i]}this._work=new Array(n+1),this._coef=new Array(n+1)}Tn.toGregorianDate=function(e,n){var t=!1,a=yn(e,Pn);T.defined(a)||(Tn.addSeconds(e,-1,Pn),a=yn(Pn,Pn),t=!0);var r=a.dayNumber,i=a.secondsOfDay;43200<=i&&(r+=1);var s=r+68569|0,o=4*s/146097|0,u=4e3*(1+(s=s-((146097*o+3)/4|0)|0))/1461001|0,e=80*(s=s-(1461*u/4|0)+31|0)/2447|0,a=s-(2447*e/80|0)|0,r=2+e-12*(s=e/11|0)|0,e=100*(o-49)+u+s|0,o=i/dn.SECONDS_PER_HOUR|0,u=i-o*dn.SECONDS_PER_HOUR,s=u/dn.SECONDS_PER_MINUTE|0,i=0|(u-=s*dn.SECONDS_PER_MINUTE),u=(u-i)/dn.SECONDS_PER_MILLISECOND;return 23<(o+=12)&&(o-=24),t&&(i+=1),T.defined(n)?(n.year=e,n.month=r,n.day=a,n.hour=o,n.minute=s,n.second=i,n.millisecond=u,n.isLeapSecond=t,n):new on(e,r,a,o,s,i,u,t)},Tn.toDate=function(e){var n=Tn.toGregorianDate(e,fn),e=n.second;return n.isLeapSecond&&--e,new Date(Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,e,n.millisecond))},Tn.toIso8601=function(e,n){var t=Tn.toGregorianDate(e,fn),a=t.year,r=t.month,i=t.day,s=t.hour,o=t.minute,e=t.second,t=t.millisecond;return 1e4===a&&1===r&&1===i&&0===s&&0===o&&0===e&&0===t&&(a=9999,r=12,i=31,s=24),T.defined(n)||0===t?T.defined(n)&&0!==n?sn("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",a,r,i,s,o,e,(.01*t).toFixed(n).replace(".","").slice(0,n)):sn("%04d-%02d-%02dT%02d:%02d:%02dZ",a,r,i,s,o,e):sn("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",a,r,i,s,o,e,(.01*t).toString().replace(".",""))},Tn.clone=function(e,n){if(T.defined(e))return T.defined(n)?(n.dayNumber=e.dayNumber,n.secondsOfDay=e.secondsOfDay,n):new Tn(e.dayNumber,e.secondsOfDay,cn.TAI)},Tn.compare=function(e,n){var t=e.dayNumber-n.dayNumber;return 0!=t?t:e.secondsOfDay-n.secondsOfDay},Tn.equals=function(e,n){return e===n||T.defined(e)&&T.defined(n)&&e.dayNumber===n.dayNumber&&e.secondsOfDay===n.secondsOfDay},Tn.equalsEpsilon=function(e,n,t){return t=T.defaultValue(t,0),e===n||T.defined(e)&&T.defined(n)&&Math.abs(Tn.secondsDifference(e,n))<=t},Tn.totalDays=function(e){return e.dayNumber+e.secondsOfDay/dn.SECONDS_PER_DAY},Tn.secondsDifference=function(e,n){return(e.dayNumber-n.dayNumber)*dn.SECONDS_PER_DAY+(e.secondsOfDay-n.secondsOfDay)},Tn.daysDifference=function(e,n){return e.dayNumber-n.dayNumber+(e.secondsOfDay-n.secondsOfDay)/dn.SECONDS_PER_DAY},Tn.computeTaiMinusUtc=function(e){hn.julianDate=e;var n=Tn.leapSeconds,e=an(n,hn,pn);return e<0&&(e=~e,--e<0&&(e=0)),n[e].offset},Tn.addSeconds=function(e,n,t){return wn(e.dayNumber,e.secondsOfDay+n,t)},Tn.addMinutes=function(e,n,t){n=e.secondsOfDay+n*dn.SECONDS_PER_MINUTE;return wn(e.dayNumber,n,t)},Tn.addHours=function(e,n,t){n=e.secondsOfDay+n*dn.SECONDS_PER_HOUR;return wn(e.dayNumber,n,t)},Tn.addDays=function(e,n,t){return wn(e.dayNumber+n,e.secondsOfDay,t)},Tn.lessThan=function(e,n){return Tn.compare(e,n)<0},Tn.lessThanOrEquals=function(e,n){return Tn.compare(e,n)<=0},Tn.greaterThan=function(e,n){return 0<Tn.compare(e,n)},Tn.greaterThanOrEquals=function(e,n){return 0<=Tn.compare(e,n)},Tn.prototype.clone=function(e){return Tn.clone(this,e)},Tn.prototype.equals=function(e){return Tn.equals(this,e)},Tn.prototype.equalsEpsilon=function(e,n){return Tn.equalsEpsilon(this,e,n)},Tn.prototype.toString=function(){return Tn.toIso8601(this)},Tn.leapSeconds=[new ln(new Tn(2441317,43210,cn.TAI),10),new ln(new Tn(2441499,43211,cn.TAI),11),new ln(new Tn(2441683,43212,cn.TAI),12),new ln(new Tn(2442048,43213,cn.TAI),13),new ln(new Tn(2442413,43214,cn.TAI),14),new ln(new Tn(2442778,43215,cn.TAI),15),new ln(new Tn(2443144,43216,cn.TAI),16),new ln(new Tn(2443509,43217,cn.TAI),17),new ln(new Tn(2443874,43218,cn.TAI),18),new ln(new Tn(2444239,43219,cn.TAI),19),new ln(new Tn(2444786,43220,cn.TAI),20),new ln(new Tn(2445151,43221,cn.TAI),21),new ln(new Tn(2445516,43222,cn.TAI),22),new ln(new Tn(2446247,43223,cn.TAI),23),new ln(new Tn(2447161,43224,cn.TAI),24),new ln(new Tn(2447892,43225,cn.TAI),25),new ln(new Tn(2448257,43226,cn.TAI),26),new ln(new Tn(2448804,43227,cn.TAI),27),new ln(new Tn(2449169,43228,cn.TAI),28),new ln(new Tn(2449534,43229,cn.TAI),29),new ln(new Tn(2450083,43230,cn.TAI),30),new ln(new Tn(2450630,43231,cn.TAI),31),new ln(new Tn(2451179,43232,cn.TAI),32),new ln(new Tn(2453736,43233,cn.TAI),33),new ln(new Tn(2454832,43234,cn.TAI),34),new ln(new Tn(2456109,43235,cn.TAI),35),new ln(new Tn(2457204,43236,cn.TAI),36),new ln(new Tn(2457754,43237,cn.TAI),37)],An.NONE=Object.freeze({getPromiseToLoad:function(){return l.when.resolve()},compute:function(e,n){return T.defined(n)?(n.xPoleWander=0,n.yPoleWander=0,n.xPoleOffset=0,n.yPoleOffset=0,n.ut1MinusUtc=0):n=new rn(0,0,0,0,0),n}}),An.prototype.getPromiseToLoad=function(){return l.when(this._downloadPromise)},An.prototype.compute=function(e,n){if(T.defined(this._samples)){if(T.defined(n)||(n=new rn(0,0,0,0,0)),0===this._samples.length)return n.xPoleWander=0,n.yPoleWander=0,n.xPoleOffset=0,n.yPoleOffset=0,n.ut1MinusUtc=0,n;var t=this._dates,a=this._lastIndex,r=0,i=0;if(T.defined(a)){var s=t[a],o=t[a+1],u=Tn.lessThanOrEquals(s,e),l=!T.defined(o),s=l||Tn.greaterThanOrEquals(o,e);if(u&&s)return r=a,!l&&o.equals(e)&&++r,i=r+1,bn(this,t,this._samples,e,r,i,n),n}o=an(t,e,Tn.compare,this._dateColumn);return 0<=o?(o<t.length-1&&t[o+1].equals(e)&&++o,i=r=o):(r=(i=~o)-1)<0&&(r=0),this._lastIndex=r,bn(this,t,this._samples,e,r,i,n),n}if(T.defined(this._dataError))throw new f.RuntimeError(this._dataError)},Un.fromQuaternion=function(e,n){T.defined(n)||(n=new Un);var t=2*(e.w*e.y-e.z*e.x),a=1-2*(e.x*e.x+e.y*e.y),r=2*(e.w*e.x+e.y*e.z),i=1-2*(e.y*e.y+e.z*e.z),e=2*(e.w*e.z+e.x*e.y);return n.heading=-Math.atan2(e,i),n.roll=Math.atan2(r,a),n.pitch=-d.CesiumMath.asinClamped(t),n},Un.fromDegrees=function(e,n,t,a){return T.defined(a)||(a=new Un),a.heading=e*d.CesiumMath.RADIANS_PER_DEGREE,a.pitch=n*d.CesiumMath.RADIANS_PER_DEGREE,a.roll=t*d.CesiumMath.RADIANS_PER_DEGREE,a},Un.clone=function(e,n){if(T.defined(e))return T.defined(n)?(n.heading=e.heading,n.pitch=e.pitch,n.roll=e.roll,n):new Un(e.heading,e.pitch,e.roll)},Un.equals=function(e,n){return e===n||T.defined(e)&&T.defined(n)&&e.heading===n.heading&&e.pitch===n.pitch&&e.roll===n.roll},Un.equalsEpsilon=function(e,n,t,a){return e===n||T.defined(e)&&T.defined(n)&&d.CesiumMath.equalsEpsilon(e.heading,n.heading,t,a)&&d.CesiumMath.equalsEpsilon(e.pitch,n.pitch,t,a)&&d.CesiumMath.equalsEpsilon(e.roll,n.roll,t,a)},Un.prototype.clone=function(e){return Un.clone(this,e)},Un.prototype.equals=function(e){return Un.equals(this,e)},Un.prototype.equalsEpsilon=function(e,n,t){return Un.equalsEpsilon(this,e,n,t)},Un.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Wn=new Tn(0,0,cn.TAI);function Vn(e,n,t){var a=Wn;return a.dayNumber=n,a.secondsOfDay=t,Tn.daysDifference(a,e._sampleZeroDateTT)}function Ln(s,o){if(s._chunkDownloadsInProgress[o])return s._chunkDownloadsInProgress[o];var u=l.when.defer();s._chunkDownloadsInProgress[o]=u;var e=s._xysFileUrlTemplate,e=T.defined(e)?e.getDerivedResource({templateValues:{0:o}}):new m.Resource({url:m.buildModuleUrl("Assets/IAU2006_XYS/IAU2006_XYS_"+o+".json")});return l.when(e.fetchJson(),function(e){s._chunkDownloadsInProgress[o]=!1;for(var n=s._samples,t=e.samples,a=o*s._samplesPerXysFile*3,r=0,i=t.length;r<i;++r)n[a+r]=t[r];u.resolve()}),u.promise}qn.prototype.preload=function(e,n,t,a){n=Vn(this,e,n),a=Vn(this,t,a),n=n/this._stepSizeDays-this._interpolationOrder/2|0;n<0&&(n=0);a=a/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;a>=this._totalSamples&&(a=this._totalSamples-1);for(var n=n/this._samplesPerXysFile|0,r=a/this._samplesPerXysFile|0,i=[],s=n;s<=r;++s)i.push(Ln(this,s));return l.when.all(i)},qn.prototype.computeXysRadians=function(e,n,t){var a=Vn(this,e,n);if(!(a<0)){e=a/this._stepSizeDays|0;if(!(e>=this._totalSamples)){var r=this._interpolationOrder,i=e-(r/2|0);i<0&&(i=0);n=i+r;n>=this._totalSamples&&(i=(n=this._totalSamples-1)-r)<0&&(i=0);var e=!1,s=this._samples;if(T.defined(s[3*i])||(Ln(this,i/this._samplesPerXysFile|0),e=!0),T.defined(s[3*n])||(Ln(this,n/this._samplesPerXysFile|0),e=!0),!e){T.defined(t)?(t.x=0,t.y=0,t.s=0):t=new Fn(0,0,0);for(var o,u=a-i*this._stepSizeDays,l=this._work,d=this._denominators,c=this._coef,f=this._xTable,m=0;m<=r;++m)l[m]=u-f[m];for(m=0;m<=r;++m){for(c[m]=1,o=0;o<=r;++o)o!==m&&(c[m]*=l[o]);c[m]*=d[m];var p=3*(i+m);t.x+=c[m]*s[p++],t.y+=c[m]*s[p++],t.s+=c[m]*s[p]}return t}}}};var kn={},Bn={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},jn={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Zn={},Yn={east:new P.Cartesian3,north:new P.Cartesian3,up:new P.Cartesian3,west:new P.Cartesian3,south:new P.Cartesian3,down:new P.Cartesian3},Gn=new P.Cartesian3,Xn=new P.Cartesian3,Jn=new P.Cartesian3;kn.localFrameToFixedFrameGenerator=function(r,i){if(!Bn.hasOwnProperty(r)||!Bn[r].hasOwnProperty(i))throw new t.DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.");var e,s=Bn[r][i],n=r+i;return T.defined(Zn[n])?e=Zn[n]:(e=function(e,n,t){var a;return T.defined(t)||(t=new c.Matrix4),P.Cartesian3.equalsEpsilon(e,P.Cartesian3.ZERO,d.CesiumMath.EPSILON14)?(P.Cartesian3.unpack(jn[r],0,Gn),P.Cartesian3.unpack(jn[i],0,Xn),P.Cartesian3.unpack(jn[s],0,Jn)):d.CesiumMath.equalsEpsilon(e.x,0,d.CesiumMath.EPSILON14)&&d.CesiumMath.equalsEpsilon(e.y,0,d.CesiumMath.EPSILON14)?(a=d.CesiumMath.sign(e.z),P.Cartesian3.unpack(jn[r],0,Gn),"east"!==r&&"west"!==r&&P.Cartesian3.multiplyByScalar(Gn,a,Gn),P.Cartesian3.unpack(jn[i],0,Xn),"east"!==i&&"west"!==i&&P.Cartesian3.multiplyByScalar(Xn,a,Xn),P.Cartesian3.unpack(jn[s],0,Jn),"east"!==s&&"west"!==s&&P.Cartesian3.multiplyByScalar(Jn,a,Jn)):((n=T.defaultValue(n,o.Ellipsoid.WGS84)).geodeticSurfaceNormal(e,Yn.up),a=Yn.up,(n=Yn.east).x=-e.y,n.y=e.x,n.z=0,P.Cartesian3.normalize(n,Yn.east),P.Cartesian3.cross(a,n,Yn.north),P.Cartesian3.multiplyByScalar(Yn.up,-1,Yn.down),P.Cartesian3.multiplyByScalar(Yn.east,-1,Yn.west),P.Cartesian3.multiplyByScalar(Yn.north,-1,Yn.south),Gn=Yn[r],Xn=Yn[i],Jn=Yn[s]),t[0]=Gn.x,t[1]=Gn.y,t[2]=Gn.z,t[3]=0,t[4]=Xn.x,t[5]=Xn.y,t[6]=Xn.z,t[7]=0,t[8]=Jn.x,t[9]=Jn.y,t[10]=Jn.z,t[11]=0,t[12]=e.x,t[13]=e.y,t[14]=e.z,t[15]=1,t},Zn[n]=e),e},kn.eastNorthUpToFixedFrame=kn.localFrameToFixedFrameGenerator("east","north"),kn.northEastDownToFixedFrame=kn.localFrameToFixedFrameGenerator("north","east"),kn.northUpEastToFixedFrame=kn.localFrameToFixedFrameGenerator("north","up"),kn.northWestUpToFixedFrame=kn.localFrameToFixedFrameGenerator("north","west");var Hn=new Te,Qn=new P.Cartesian3(1,1,1),$n=new c.Matrix4;kn.headingPitchRollToFixedFrame=function(e,n,t,a,r){a=T.defaultValue(a,kn.eastNorthUpToFixedFrame);n=Te.fromHeadingPitchRoll(n,Hn),n=c.Matrix4.fromTranslationQuaternionRotationScale(P.Cartesian3.ZERO,n,Qn,$n);return r=a(e,t,r),c.Matrix4.multiply(r,n,r)};var Kn=new c.Matrix4,et=new c.Matrix3;kn.headingPitchRollQuaternion=function(e,n,t,a,r){a=kn.headingPitchRollToFixedFrame(e,n,t,a,Kn),a=c.Matrix4.getMatrix3(a,et);return Te.fromRotationMatrix(a,r)};var nt=new P.Cartesian3(1,1,1),tt=new P.Cartesian3,at=new c.Matrix4,rt=new c.Matrix4,it=new c.Matrix3,st=new Te;kn.fixedFrameToHeadingPitchRoll=function(e,n,t,a){n=T.defaultValue(n,o.Ellipsoid.WGS84),t=T.defaultValue(t,kn.eastNorthUpToFixedFrame),T.defined(a)||(a=new Un);var r=c.Matrix4.getTranslation(e,tt);if(P.Cartesian3.equals(r,P.Cartesian3.ZERO))return a.heading=0,a.pitch=0,a.roll=0,a;n=c.Matrix4.inverseTransformation(t(r,n,at),at),e=c.Matrix4.setScale(e,nt,rt),e=c.Matrix4.setTranslation(e,P.Cartesian3.ZERO,e),n=c.Matrix4.multiply(n,e,n),n=Te.fromRotationMatrix(c.Matrix4.getMatrix3(n,it),st),n=Te.normalize(n,n);return Un.fromQuaternion(n,a)};var ot=d.CesiumMath.TWO_PI/86400,ut=new Tn;kn.computeTemeToPseudoFixedMatrix=function(e,n){var t=(ut=Tn.addSeconds(e,-Tn.computeTaiMinusUtc(e),ut)).dayNumber,a=ut.secondsOfDay,e=t-2451545,e=43200<=a?(.5+e)/dn.DAYS_PER_JULIAN_CENTURY:(e-.5)/dn.DAYS_PER_JULIAN_CENTURY,t=(24110.54841+e*(8640184.812866+e*(.093104+-62e-7*e)))*ot%d.CesiumMath.TWO_PI+(72921158553e-15+11772758384668e-32*(t-2451545.5))*((a+.5*dn.SECONDS_PER_DAY)%dn.SECONDS_PER_DAY),a=Math.cos(t),t=Math.sin(t);return T.defined(n)?(n[0]=a,n[1]=-t,n[2]=0,n[3]=t,n[4]=a,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n):new c.Matrix3(a,t,0,-t,a,0,0,0,1)},kn.iau2006XysData=new qn,kn.earthOrientationParameters=An.NONE;var lt=32.184;kn.preloadIcrfFixed=function(e){var n=e.start.dayNumber,t=e.start.secondsOfDay+lt,a=e.stop.dayNumber,e=e.stop.secondsOfDay+lt,a=kn.iau2006XysData.preload(n,t,a,e),e=kn.earthOrientationParameters.getPromiseToLoad();return l.when.all([a,e])},kn.computeIcrfToFixedMatrix=function(e,n){T.defined(n)||(n=new c.Matrix3);e=kn.computeFixedToIcrfMatrix(e,n);if(T.defined(e))return c.Matrix3.transpose(e,n)};var dt=new Fn(0,0,0),ct=new rn(0,0,0,0,0),ft=new c.Matrix3,mt=new c.Matrix3;kn.computeFixedToIcrfMatrix=function(e,n){T.defined(n)||(n=new c.Matrix3);var t=kn.earthOrientationParameters.compute(e,ct);if(T.defined(t)){var a=e.dayNumber,r=e.secondsOfDay+lt,i=kn.iau2006XysData.computeXysRadians(a,r,dt);if(T.defined(i)){var s=i.x+t.xPoleOffset,o=i.y+t.yPoleOffset,u=1/(1+Math.sqrt(1-s*s-o*o)),l=ft;l[0]=1-u*s*s,l[3]=-u*s*o,l[6]=s,l[1]=-u*s*o,l[4]=1-u*o*o,l[7]=o,l[2]=-s,l[5]=-o,l[8]=1-u*(s*s+o*o);s=c.Matrix3.fromRotationZ(-i.s,mt),o=c.Matrix3.multiply(l,s,ft),i=e.dayNumber-2451545,l=(e.secondsOfDay-Tn.computeTaiMinusUtc(e)+t.ut1MinusUtc)/dn.SECONDS_PER_DAY,s=(s=.779057273264+l+.00273781191135448*(i+l))%1*d.CesiumMath.TWO_PI,e=c.Matrix3.fromRotationZ(s,mt),i=c.Matrix3.multiply(o,e,ft),l=Math.cos(t.xPoleWander),s=Math.cos(t.yPoleWander),o=Math.sin(t.xPoleWander),e=Math.sin(t.yPoleWander),t=a-2451545+r/dn.SECONDS_PER_DAY,a=-47e-6*(t/=36525)*d.CesiumMath.RADIANS_PER_DEGREE/3600,r=Math.cos(a),t=Math.sin(a),a=mt;return a[0]=l*r,a[1]=l*t,a[2]=o,a[3]=-s*t+e*o*r,a[4]=s*r+e*o*t,a[5]=-e*l,a[6]=-e*t-s*o*r,a[7]=e*r-s*o*t,a[8]=s*l,c.Matrix3.multiply(i,a,n)}}};var pt=new c.Cartesian4;kn.pointToWindowCoordinates=function(e,n,t,a){return(a=kn.pointToGLWindowCoordinates(e,n,t,a)).y=2*n[5]-a.y,a},kn.pointToGLWindowCoordinates=function(e,n,t,a){T.defined(a)||(a=new P.Cartesian2);var r=pt;return c.Matrix4.multiplyByVector(e,c.Cartesian4.fromElements(t.x,t.y,t.z,1,r),r),c.Cartesian4.multiplyByScalar(r,1/r.w,r),c.Matrix4.multiplyByVector(n,r,r),P.Cartesian2.fromCartesian4(r,a)};var ht=new P.Cartesian3,Ct=new P.Cartesian3,yt=new P.Cartesian3;kn.rotationMatrixFromPositionVelocity=function(e,n,t,a){t=T.defaultValue(t,o.Ellipsoid.WGS84).geodeticSurfaceNormal(e,ht),e=P.Cartesian3.cross(n,t,Ct);P.Cartesian3.equalsEpsilon(e,P.Cartesian3.ZERO,d.CesiumMath.EPSILON6)&&(e=P.Cartesian3.clone(P.Cartesian3.UNIT_X,e));t=P.Cartesian3.cross(e,n,yt);return P.Cartesian3.normalize(t,t),P.Cartesian3.cross(n,t,e),P.Cartesian3.negate(e,e),P.Cartesian3.normalize(e,e),T.defined(a)||(a=new c.Matrix3),a[0]=n.x,a[1]=n.y,a[2]=n.z,a[3]=e.x,a[4]=e.y,a[5]=e.z,a[6]=t.x,a[7]=t.y,a[8]=t.z,a};var wt=new c.Matrix4(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),xt=new P.Cartographic,gt=new P.Cartesian3,Et=new P.Cartesian3,_t=new c.Matrix3,vt=new c.Matrix4,St=new c.Matrix4;kn.basisTo2D=function(e,n,t){var a=c.Matrix4.getTranslation(n,Et),r=e.ellipsoid,i=r.cartesianToCartographic(a,xt),i=e.project(i,gt);P.Cartesian3.fromElements(i.z,i.x,i.y,i);r=kn.eastNorthUpToFixedFrame(a,r,vt),r=c.Matrix4.inverseTransformation(r,St),n=c.Matrix4.getMatrix3(n,_t),n=c.Matrix4.multiplyByMatrix3(r,n,t);return c.Matrix4.multiply(wt,n,t),c.Matrix4.setTranslation(t,i,t),t},kn.wgs84To2DModelMatrix=function(e,n,t){var a=e.ellipsoid,r=kn.eastNorthUpToFixedFrame(n,a,vt),r=c.Matrix4.inverseTransformation(r,St),n=a.cartesianToCartographic(n,xt),n=e.project(n,gt);P.Cartesian3.fromElements(n.z,n.x,n.y,n);n=c.Matrix4.fromTranslation(n,vt);return c.Matrix4.multiply(wt,r,t),c.Matrix4.multiply(n,t,t),t},e.BoundingSphere=A,e.FeatureDetection=De,e.GeographicProjection=a,e.Intersect=r,e.Quaternion=Te,e.Transforms=kn});
