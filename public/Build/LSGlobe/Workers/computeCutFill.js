define(["./defaultValue-bcb5baf7","./DeveloperError-b273b01a","./Check-f9a1a1be","./Math-588d98f6","./Cartesian2-10213add","./Matrix4-c981b715","./RuntimeError-1b5fbc4d","./when-ae2a7552","./IntersectionTests-cc1722b0","./createTaskProcessorWorker"],function(e,a,t,ne,ie,se,r,n,oe,i){"use strict";return i(function(e,a){for(var t=e.sampleGap,r=e.geoPolygon,n=e.vertice,i=e.matLocalInvert,s=e.matLocal,o=e.zFactor,l=r._polygonHierarchy.positions,u=[],e=ie.Cartographic.fromCartesian(l[0]),h=ne.CesiumMath.toDegrees(e.longitude),C=ne.CesiumMath.toDegrees(e.latitude),g=ne.CesiumMath.toDegrees(e.longitude),y=ne.CesiumMath.toDegrees(e.latitude),p=0;p<l.length;p++){var c=ie.Cartographic.fromCartesian(l[p]),f=ne.CesiumMath.toDegrees(c.longitude),m=ne.CesiumMath.toDegrees(c.latitude),c=new ie.Cartesian2(f,m);u.push(c),g<f&&(g=f),f<h&&(h=f),y<m&&(y=m),m<C&&(C=m)}var r=ie.Cartesian3.distance(ie.Cartesian3.fromDegrees(h,C,o),ie.Cartesian3.fromDegrees(g,C,o)),e=ie.Cartesian3.distance(ie.Cartesian3.fromDegrees(h,C,o),ie.Cartesian3.fromDegrees(h,y,o)),d=parseInt(r/t+1),v=parseInt(e/t+1);65535<d*v&&(t=r<e?(d=(v=256)*(r/e),e/256):(v=(d=256)*(e/r),r/256));for(var x=(g-h)/(d-1),w=(y-C)/(v-1),r=r/(d-1)*(e/(v-1)),M=[],p=0;p<d;p++)for(var D=0;D<v;D++){for(var b,z=new ie.Cartesian2(h+p*x,C+D*w),P=!1,B=0,I=l.length-1;B<l.length;I=B++)u[B].y>z.y!=u[I].y>z.y&&z.x<(u[I].x-u[B].x)*(z.y-u[B].y)/(u[I].y-u[B].y)+u[B].x&&(P=!P);1==P&&(b=new ie.Cartesian3.fromDegrees(h+p*x,C+D*w,o),M.push(b))}for(var T=[],R=[],L=[],k=[],p=0;p<M.length;p++){var S=new ie.Cartesian3(M[p].x,M[p].y,M[p].z),V=ie.Cartographic.fromCartesian(S),E=ne.CesiumMath.toDegrees(V.longitude),F=ne.CesiumMath.toDegrees(V.latitude),G=V.height,H=new ie.Cartesian3.fromDegrees(E,F,G-10);se.Matrix4.multiplyByPoint(i,S,S),se.Matrix4.multiplyByPoint(i,H,H);var V=new ie.Cartesian3(H.x-S.x,H.y-S.y,H.z-S.z),W=new oe.Ray(S,V),H=new ie.Cartesian3(M[p].x,M[p].y,M[p].z),V=new ie.Cartesian3(-H.x,-H.y,-H.z),_=new oe.Ray(H,V),V=new ie.Cartesian3(M[p].x,M[p].y,M[p].z),G=new ie.Cartesian3.fromDegrees(E,F,G+10);se.Matrix4.multiplyByPoint(i,V,V),se.Matrix4.multiplyByPoint(i,G,G);for(var j,q,G=new ie.Cartesian3(G.x-V.x,G.y-V.y,G.z-V.z),A=new oe.Ray(V,G),G=new ie.Cartesian3(H.x,H.y,H.z),J=new oe.Ray(H,G),K=[],N=[],I=0;I<n.length;I++){var O=new ie.Cartesian3,O=oe.IntersectionTests.raySphere(_,n[I].boundingVolume,O),Q=new ie.Cartesian3,Q=oe.IntersectionTests.raySphere(J,n[I].boundingVolume,Q);if(null!=n[I]&&void 0!==O){for(var U=n[I].indices,X=n[I].verts,Y=[],B=0;B<X.length/3;B++)($=new ie.Cartesian3(0,0,0)).x=X[3*B],$.y=X[3*B+1],$.z=X[3*B+2],Y.push($);for(var Z=0;Z<U.length/3;Z++){z=new ie.Cartesian3;(ee=[]).push(Y[U[3*Z]],Y[U[3*Z+1]],Y[U[3*Z+2]]),void 0!==(z=oe.IntersectionTests.rayTriangle(W,ee[0],ee[1],ee[2],!1,z))&&K.push(z)}}if(null!=n[I]&&void 0!==Q){for(var $,U=n[I].indices,X=n[I].verts,Y=[],B=0;B<X.length/3;B++)($=new ie.Cartesian3(0,0,0)).x=X[3*B],$.y=X[3*B+1],$.z=X[3*B+2],Y.push($);for(Z=0;Z<U.length/3;Z++){var ee,z=new ie.Cartesian3;(ee=[]).push(Y[U[3*Z]],Y[U[3*Z+1]],Y[U[3*Z+2]]),void 0!==(z=oe.IntersectionTests.rayTriangle(A,ee[0],ee[1],ee[2],!1,z))&&N.push(z)}}}if(1<N.length){for(var ae=N[0],te=1;te<N.length;te++)ie.Cartesian3.distance(N[te],S)<ie.Cartesian3.distance(ae,S)&&(ae=N[te]);se.Matrix4.multiplyByPoint(s,ae,ae);var re=ie.Cartesian3.distance(H,ae);R.push(re),k.push(H,ae)}if(1==N.length&&(j=N[0],se.Matrix4.multiplyByPoint(s,j,j),q=ie.Cartesian3.distance(H,j),R.push(q),k.push(H,j)),1<K.length){for(ae=K[0],te=1;te<K.length;te++)ie.Cartesian3.distance(K[te],S)<ie.Cartesian3.distance(ae,S)&&(ae=K[te]);se.Matrix4.multiplyByPoint(s,ae,ae);re=ie.Cartesian3.distance(H,ae);T.push(re),L.push(H,ae)}1==K.length&&(j=K[0],se.Matrix4.multiplyByPoint(s,j,j),q=ie.Cartesian3.distance(H,j),T.push(q),L.push(H,j))}return(e=[]).hightFill=T,e.hightCut=R,e.pointsLine=L,e.pointsLine1=k,e.areaSample=r,e})});
