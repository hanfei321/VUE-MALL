define(["exports","./defaultValue-bcb5baf7","./DeveloperError-b273b01a","./Check-f9a1a1be","./Cartesian2-10213add","./Rectangle-de996bfb","./Transforms-2b063051","./Matrix4-c981b715","./WebGLConstants-667a4a5e"],function(e,a,t,n,x,L,g,w,r){"use strict";var i=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3});function S(e,t,n,r){this[0]=a.defaultValue(e,0),this[1]=a.defaultValue(n,0),this[2]=a.defaultValue(t,0),this[3]=a.defaultValue(r,0)}S.packedLength=4,S.pack=function(e,t,n){return n=a.defaultValue(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t},S.unpack=function(e,t,n){return t=a.defaultValue(t,0),a.defined(n)||(n=new S),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n},S.clone=function(e,t){if(a.defined(e))return a.defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):new S(e[0],e[2],e[1],e[3])},S.fromArray=function(e,t,n){return t=a.defaultValue(t,0),a.defined(n)||(n=new S),n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],n},S.fromColumnMajorArray=function(e,t){return S.clone(e,t)},S.fromRowMajorArray=function(e,t){return a.defined(t)?(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t):new S(e[0],e[1],e[2],e[3])},S.fromScale=function(e,t){return a.defined(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=e.y,t):new S(e.x,0,0,e.y)},S.fromUniformScale=function(e,t){return a.defined(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=e,t):new S(e,0,0,e)},S.fromRotation=function(e,t){var n=Math.cos(e),e=Math.sin(e);return a.defined(t)?(t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t):new S(n,-e,e,n)},S.toArray=function(e,t){return a.defined(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):[e[0],e[1],e[2],e[3]]},S.getElementIndex=function(e,t){return 2*e+t},S.getColumn=function(e,t,n){var r=2*t,t=e[r],r=e[1+r];return n.x=t,n.y=r,n},S.setColumn=function(e,t,n,r){t*=2;return(r=S.clone(e,r))[t]=n.x,r[1+t]=n.y,r},S.getRow=function(e,t,n){var r=e[t],t=e[t+2];return n.x=r,n.y=t,n},S.setRow=function(e,t,n,r){return(r=S.clone(e,r))[t]=n.x,r[t+2]=n.y,r};var u=new x.Cartesian2;S.getScale=function(e,t){return t.x=x.Cartesian2.magnitude(x.Cartesian2.fromElements(e[0],e[1],u)),t.y=x.Cartesian2.magnitude(x.Cartesian2.fromElements(e[2],e[3],u)),t};var o=new x.Cartesian2;S.getMaximumScale=function(e){return S.getScale(e,o),x.Cartesian2.maximumComponent(o)},S.multiply=function(e,t,n){var r=e[0]*t[0]+e[2]*t[1],a=e[0]*t[2]+e[2]*t[3],i=e[1]*t[0]+e[3]*t[1],t=e[1]*t[2]+e[3]*t[3];return n[0]=r,n[1]=i,n[2]=a,n[3]=t,n},S.add=function(e,t,n){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n},S.subtract=function(e,t,n){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n},S.multiplyByVector=function(e,t,n){var r=e[0]*t.x+e[2]*t.y,t=e[1]*t.x+e[3]*t.y;return n.x=r,n.y=t,n},S.multiplyByScalar=function(e,t,n){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n},S.multiplyByScale=function(e,t,n){return n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.y,n[3]=e[3]*t.y,n},S.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},S.transpose=function(e,t){var n=e[0],r=e[2],a=e[1],e=e[3];return t[0]=n,t[1]=r,t[2]=a,t[3]=e,t},S.abs=function(e,t){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t},S.equals=function(e,t){return e===t||a.defined(e)&&a.defined(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},S.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]},S.equalsEpsilon=function(e,t,n){return n=a.defaultValue(n,0),e===t||a.defined(e)&&a.defined(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n},S.IDENTITY=Object.freeze(new S(1,0,0,1)),S.ZERO=Object.freeze(new S(0,0,0,0)),S.COLUMN0ROW0=0,S.COLUMN0ROW1=1,S.COLUMN1ROW0=2,S.COLUMN1ROW1=3,Object.defineProperties(S.prototype,{length:{get:function(){return S.packedLength}}}),S.prototype.clone=function(e){return S.clone(this,e)},S.prototype.equals=function(e){return S.equals(this,e)},S.prototype.equalsEpsilon=function(e,t){return S.equalsEpsilon(this,e,t)},S.prototype.toString=function(){return"("+this[0]+", "+this[2]+")\n("+this[1]+", "+this[3]+")"};var s={POINTS:r.WebGLConstants.POINTS,LINES:r.WebGLConstants.LINES,LINE_LOOP:r.WebGLConstants.LINE_LOOP,LINE_STRIP:r.WebGLConstants.LINE_STRIP,TRIANGLES:r.WebGLConstants.TRIANGLES,TRIANGLE_STRIP:r.WebGLConstants.TRIANGLE_STRIP,TRIANGLE_FAN:r.WebGLConstants.TRIANGLE_FAN,validate:function(e){return e===s.POINTS||e===s.LINES||e===s.LINE_LOOP||e===s.LINE_STRIP||e===s.TRIANGLES||e===s.TRIANGLE_STRIP||e===s.TRIANGLE_FAN}},f=Object.freeze(s);function l(e){e=a.defaultValue(e,a.defaultValue.EMPTY_OBJECT),this.attributes=e.attributes,this.indices=e.indices,this.primitiveType=a.defaultValue(e.primitiveType,f.TRIANGLES),this.boundingSphere=e.boundingSphere,this.geometryType=a.defaultValue(e.geometryType,i.NONE),this.boundingSphereCV=e.boundingSphereCV,this.offsetAttribute=e.offsetAttribute}l.computeNumberOfVertices=function(e){var t,n,r=-1;for(t in e.attributes)e.attributes.hasOwnProperty(t)&&a.defined(e.attributes[t])&&a.defined(e.attributes[t].values)&&(r=(n=e.attributes[t]).values.length/n.componentsPerAttribute);return r};var A=new x.Cartographic,M=new x.Cartesian3,O=new w.Matrix4,R=[new x.Cartographic,new x.Cartographic,new x.Cartographic],v=[new x.Cartesian2,new x.Cartesian2,new x.Cartesian2],V=[new x.Cartesian2,new x.Cartesian2,new x.Cartesian2],P=new x.Cartesian3,G=new g.Quaternion,_=new w.Matrix4,W=new S;l._textureCoordinateRotationPoints=function(e,t,n,r){var a=L.Rectangle.center(r,A),i=x.Cartographic.toCartesian(a,n,M),a=g.Transforms.eastNorthUpToFixedFrame(i,n,O),u=w.Matrix4.inverse(a,O),o=v,s=R;s[0].longitude=r.west,s[0].latitude=r.south,s[1].longitude=r.west,s[1].latitude=r.north,s[2].longitude=r.east,s[2].latitude=r.south;for(var f=P,l=0;l<3;l++)x.Cartographic.toCartesian(s[l],n,f),f=w.Matrix4.multiplyByPointAsVector(u,f,f),o[l].x=f.x,o[l].y=f.y;var i=g.Quaternion.fromAxisAngle(x.Cartesian3.UNIT_Z,-t,G),c=w.Matrix3.fromQuaternion(i,_),d=e.length,y=Number.POSITIVE_INFINITY,m=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(l=0;l<d;l++)f=w.Matrix4.multiplyByPointAsVector(u,e[l],f),f=w.Matrix3.multiplyByVector(c,f,f),y=Math.min(y,f.x),m=Math.min(m,f.y),p=Math.max(p,f.x),h=Math.max(h,f.y);var b=S.fromRotation(t,W),N=V;N[0].x=y,N[0].y=m,N[1].x=y,N[1].y=h,N[2].x=p,N[2].y=m;var I=o[0],C=o[2].x-I.x,T=o[1].y-I.y;for(l=0;l<3;l++){var E=N[l];S.multiplyByVector(b,E,E),E.x=(E.x-I.x)/C,E.y=(E.y-I.y)/T}a=N[0],r=N[1],i=N[2],t=new Array(6);return x.Cartesian2.pack(a,t),x.Cartesian2.pack(r,t,2),x.Cartesian2.pack(i,t,4),t},e.Geometry=l,e.GeometryAttribute=function(e){e=a.defaultValue(e,a.defaultValue.EMPTY_OBJECT),this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=a.defaultValue(e.normalize,!1),this.values=e.values},e.GeometryType=i,e.Matrix2=S,e.PrimitiveType=f});
