define(["./defaultValue-bcb5baf7","./DeveloperError-b273b01a","./Check-f9a1a1be","./Math-588d98f6","./Cartesian2-10213add","./Rectangle-de996bfb","./Transforms-2b063051","./Matrix4-c981b715","./RuntimeError-1b5fbc4d","./WebGLConstants-667a4a5e","./ComponentDatatype-ec1abf38","./GeometryAttribute-49fe2445","./when-ae2a7552","./buildModuleUrl-cd6b3599","./GeometryAttributes-a8cf4ac9","./AttributeCompression-8a5fa32d","./GeometryPipeline-635df242","./EncodedCartesian3-96cc4460","./IndexDatatype-523f50d6","./IntersectionTests-cc1722b0","./Plane-bb97f210","./VertexFormat-15410d3c","./arrayRemoveDuplicates-f05ed775","./BoundingRectangle-7fd61f33","./EllipsoidTangentPlane-86347fa6","./EllipsoidRhumbLine-b25fd372","./PolygonPipeline-bd17f470","./PolylineVolumeGeometryLibrary-a52c795b","./EllipsoidGeodesic-8f6c0327","./PolylinePipeline-74d8353e"],function(u,e,t,r,c,g,G,n,i,a,R,A,o,l,D,s,I,d,O,p,y,m,h,f,b,v,S,E,P,_){"use strict";var x={};function B(e,t){u.defined(x[e])||(x[e]=!0,console.warn(u.defaultValue(t,e)))}function k(e){var t=(e=u.defaultValue(e,u.defaultValue.EMPTY_OBJECT)).polylinePositions,n=e.shapePositions;this._positions=t,this._shape=n,this._ellipsoid=g.Ellipsoid.clone(u.defaultValue(e.ellipsoid,g.Ellipsoid.WGS84)),this._cornerType=u.defaultValue(e.cornerType,E.CornerType.ROUNDED),this._vertexFormat=m.VertexFormat.clone(u.defaultValue(e.vertexFormat,m.VertexFormat.DEFAULT)),this._granularity=u.defaultValue(e.granularity,r.CesiumMath.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeGeometry";t=1+t.length*c.Cartesian3.packedLength;t+=1+n.length*c.Cartesian2.packedLength,this.packedLength=t+g.Ellipsoid.packedLength+m.VertexFormat.packedLength+2}B.geometryOutlines="Entity geometry outlines are unsupported on terrain. Outlines will be disabled. To enable outlines, disable geometry terrain clamping by explicitly setting height to 0.",B.geometryZIndex="Entity geometry with zIndex are unsupported when height or extrudedHeight are defined.  zIndex will be ignored",B.geometryHeightReference="Entity corridor, ellipse, polygon or rectangle with heightReference must also have a defined height.  heightReference will be ignored",B.geometryExtrudedHeightReference="Entity corridor, ellipse, polygon or rectangle with extrudedHeightReference must also have a defined extrudedHeight.  extrudedHeightReference will be ignored",k.pack=function(e,t,n){var r;n=u.defaultValue(n,0);var i=e._positions,a=i.length;for(t[n++]=a,r=0;r<a;++r,n+=c.Cartesian3.packedLength)c.Cartesian3.pack(i[r],t,n);var o=e._shape,a=o.length;for(t[n++]=a,r=0;r<a;++r,n+=c.Cartesian2.packedLength)c.Cartesian2.pack(o[r],t,n);return g.Ellipsoid.pack(e._ellipsoid,t,n),n+=g.Ellipsoid.packedLength,m.VertexFormat.pack(e._vertexFormat,t,n),n+=m.VertexFormat.packedLength,t[n++]=e._cornerType,t[n]=e._granularity,t};var V=g.Ellipsoid.clone(g.Ellipsoid.UNIT_SPHERE),C=new m.VertexFormat,L={polylinePositions:void 0,shapePositions:void 0,ellipsoid:V,vertexFormat:C,cornerType:void 0,granularity:void 0};k.unpack=function(e,t,n){t=u.defaultValue(t,0);for(var r=e[t++],i=new Array(r),a=0;a<r;++a,t+=c.Cartesian3.packedLength)i[a]=c.Cartesian3.unpack(e,t);r=e[t++];var o=new Array(r);for(a=0;a<r;++a,t+=c.Cartesian2.packedLength)o[a]=c.Cartesian2.unpack(e,t);var l=g.Ellipsoid.unpack(e,t,V);t+=g.Ellipsoid.packedLength;var s=m.VertexFormat.unpack(e,t,C);t+=m.VertexFormat.packedLength;var d=e[t++],p=e[t];return u.defined(n)?(n._positions=i,n._shape=o,n._ellipsoid=g.Ellipsoid.clone(l,n._ellipsoid),n._vertexFormat=m.VertexFormat.clone(s,n._vertexFormat),n._cornerType=d,n._granularity=p,n):(L.polylinePositions=i,L.shapePositions=o,L.cornerType=d,L.granularity=p,new k(L))};var w=new f.BoundingRectangle;return k.createGeometry=function(e){var t=e._positions,n=h.arrayRemoveDuplicates(t,c.Cartesian3.equalsEpsilon),r=e._shape,r=E.PolylineVolumeGeometryLibrary.removeDuplicatesFromShape(r);if(!(n.length<2||r.length<3)){S.PolygonPipeline.computeWindingOrder2D(r)===S.WindingOrder.CLOCKWISE&&r.reverse();t=f.BoundingRectangle.fromPoints(r,w);return function(e,t,n,r){var i=new D.GeometryAttributes;r.position&&(i.position=new A.GeometryAttribute({componentDatatype:R.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:e}));var a,o,l,s,d,p=t.length,u=e.length/3,c=(u-2*p)/(2*p),g=S.PolygonPipeline.triangulate(t),y=(c-1)*p*6+2*g.length,m=O.IndexDatatype.createTypedArray(u,y),h=2*p,f=0;for(V=0;V<c-1;V++){for(a=0;a<p-1;a++)d=(o=2*a+V*p*2)+h,s=(l=o+1)+h,m[f++]=l,m[f++]=o,m[f++]=s,m[f++]=s,m[f++]=o,m[f++]=d;s=(l=(o=2*p-2+V*p*2)+1)+h,d=o+h,m[f++]=l,m[f++]=o,m[f++]=s,m[f++]=s,m[f++]=o,m[f++]=d}if(r.st||r.tangent||r.bitangent){for(var b,v,E=new Float32Array(2*u),P=1/(c-1),_=1/n.height,x=n.height/2,k=0,V=0;V<c;V++){for(b=V*P,v=_*(t[0].y+x),E[k++]=b,E[k++]=v,a=1;a<p;a++)v=_*(t[a].y+x),E[k++]=b,E[k++]=v,E[k++]=b,E[k++]=v;v=_*(t[0].y+x),E[k++]=b,E[k++]=v}for(a=0;a<p;a++)b=0,v=_*(t[a].y+x),E[k++]=b,E[k++]=v;for(a=0;a<p;a++)b=(c-1)*P,v=_*(t[a].y+x),E[k++]=b,E[k++]=v;i.st=new A.GeometryAttribute({componentDatatype:R.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array(E)})}var C=u-2*p;for(V=0;V<g.length;V+=3){var L=g[V]+C,w=g[V+1]+C,F=g[V+2]+C;m[f++]=L,m[f++]=w,m[f++]=F,m[f++]=F+p,m[f++]=w+p,m[f++]=L+p}var T=new A.Geometry({attributes:i,indices:m,boundingSphere:G.BoundingSphere.fromVertices(e),primitiveType:A.PrimitiveType.TRIANGLES});if(r.normal&&(T=I.GeometryPipeline.computeNormal(T)),r.tangent||r.bitangent){try{T=I.GeometryPipeline.computeTangentAndBitangent(T)}catch(e){B("polyline-volume-tangent-bitangent","Unable to compute tangents and bitangents for polyline volume geometry")}r.tangent||(T.attributes.tangent=void 0),r.bitangent||(T.attributes.bitangent=void 0),r.st||(T.attributes.st=void 0)}return T}(E.PolylineVolumeGeometryLibrary.computePositions(n,r,t,e,!0),r,t,e._vertexFormat)}},function(e,t){return u.defined(t)&&(e=k.unpack(e,t)),e._ellipsoid=g.Ellipsoid.clone(e._ellipsoid),k.createGeometry(e)}});
