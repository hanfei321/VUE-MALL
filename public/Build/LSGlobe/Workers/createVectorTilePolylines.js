define(["./defaultValue-bcb5baf7","./DeveloperError-b273b01a","./Check-f9a1a1be","./Math-588d98f6","./Cartesian2-10213add","./Rectangle-de996bfb","./WebGLConstants-667a4a5e","./when-ae2a7552","./AttributeCompression-8a5fa32d","./IndexDatatype-523f50d6","./createTaskProcessorWorker"],function(a,e,r,P,L,S,t,n,_,G,i){"use strict";var W=32767,B=new L.Cartographic,z=new L.Cartesian3;var H=new S.Rectangle,O=new S.Ellipsoid,V=new L.Cartesian3,Y={min:void 0,max:void 0};var Z=new L.Cartesian3,j=new L.Cartesian3,q=new L.Cartesian3,J=new L.Cartesian3,K=new L.Cartesian3;return i(function(a,e){var r=new Uint16Array(a.positions),t=new Uint16Array(a.widths),n=new Uint32Array(a.counts),i=new Uint16Array(a.batchIds);!function(a){a=new Float64Array(a);var e=0;Y.min=a[e++],Y.max=a[e++],S.Rectangle.unpack(a,2,H),e+=S.Rectangle.packedLength,S.Ellipsoid.unpack(a,e,O),e+=S.Ellipsoid.packedLength,L.Cartesian3.unpack(a,e,V)}(a.packedBuffer);for(var s=V,u=function(a,e,r,t,n){var i=a.length/3,s=a.subarray(0,i),u=a.subarray(i,2*i),o=a.subarray(2*i,3*i);_.AttributeCompression.zigZagDeltaDecode(s,u,o);for(var c=new Float64Array(a.length),f=0;f<i;++f){var p=s[f],C=u[f],d=o[f],p=P.CesiumMath.lerp(e.west,e.east,p/W),C=P.CesiumMath.lerp(e.south,e.north,C/W),d=P.CesiumMath.lerp(r,t,d/W),d=L.Cartographic.fromRadians(p,C,d,B),d=n.cartographicToCartesian(d,z);L.Cartesian3.pack(d,c,3*f)}return c}(r,H,Y.min,Y.max,O),r=4*(a=u.length/3)-4,o=new Float32Array(3*r),c=new Float32Array(3*r),f=new Float32Array(3*r),p=new Float32Array(2*r),C=new Uint16Array(r),d=0,b=0,l=0,w=0,h=n.length,y=0;y<h;++y){for(var k,v=n[y],g=t[y],A=i[y],m=0;m<v;++m){0===m?(x=L.Cartesian3.unpack(u,3*w,Z),E=L.Cartesian3.unpack(u,3*(w+1),j),k=L.Cartesian3.subtract(x,E,q),L.Cartesian3.add(x,k,k)):k=L.Cartesian3.unpack(u,3*(w+m-1),q);var E,x,D,I=L.Cartesian3.unpack(u,3*(w+m),J);m===v-1?(E=L.Cartesian3.unpack(u,3*(w+v-1),Z),x=L.Cartesian3.unpack(u,3*(w+v-2),j),D=L.Cartesian3.subtract(E,x,K),L.Cartesian3.add(E,D,D)):D=L.Cartesian3.unpack(u,3*(w+m+1),K),L.Cartesian3.subtract(k,s,k),L.Cartesian3.subtract(I,s,I),L.Cartesian3.subtract(D,s,D);for(var R=m===v-1?2:4,T=0===m?2:0;T<R;++T){L.Cartesian3.pack(I,o,d),L.Cartesian3.pack(k,c,d),L.Cartesian3.pack(D,f,d),d+=3;var U=T-2<0?-1:1;p[b++]=T%2*2-1,p[b++]=U*g,C[l++]=A}}w+=v}var F=G.IndexDatatype.createTypedArray(r,6*a-6),N=0,M=0,h=a-1;for(y=0;y<h;++y)F[M++]=N,F[M++]=N+2,F[M++]=N+1,F[M++]=N+1,F[M++]=N+2,F[M++]=N+3,N+=4;return e.push(o.buffer,c.buffer,f.buffer),e.push(p.buffer,C.buffer,F.buffer),{indexDatatype:2===F.BYTES_PER_ELEMENT?G.IndexDatatype.UNSIGNED_SHORT:G.IndexDatatype.UNSIGNED_INT,currentPositions:o.buffer,previousPositions:c.buffer,nextPositions:f.buffer,expandAndWidth:p.buffer,batchIds:C.buffer,indices:F.buffer}})});
