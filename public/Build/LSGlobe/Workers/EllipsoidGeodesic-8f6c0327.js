define(["exports","./defaultValue-bcb5baf7","./Check-f9a1a1be","./Math-588d98f6","./Cartesian2-10213add","./Rectangle-de996bfb"],function(t,p,a,q,O,n){"use strict";function U(t,a,i,n,e,s,r){var h,i=(h=t)*(i=i)*(4+h*(4-3*i))/16;return(1-i)*t*a*(n+i*e*(r+i*s*(2*r*r-1)))}var S=new O.Cartesian3,A=new O.Cartesian3;function e(t,a,i,n){var e,s,r,h,o,d,u,c,l,M,g,_,p,f,m,v,C,H,b;O.Cartesian3.normalize(n.cartographicToCartesian(a,A),S),O.Cartesian3.normalize(n.cartographicToCartesian(i,A),A);!function(t,a,i,n,e,s,r){var h=(a-i)/a,o=s-n,n=Math.atan((1-h)*Math.tan(e)),e=Math.atan((1-h)*Math.tan(r)),r=Math.cos(n),n=Math.sin(n),d=Math.cos(e),e=Math.sin(e),u=r*d,c=r*e,l=n*e,M=n*d,g=o,_=q.CesiumMath.TWO_PI,p=Math.cos(g),f=Math.sin(g);do{p=Math.cos(g),f=Math.sin(g);var m,v,C=c-M*p,H=Math.sqrt(d*d*f*f+C*C),b=l+u*p,O=Math.atan2(H,b),_=g,S=b-2*l/(v=0===H?(m=0,1):1-(m=u*f/H)*m)}while(isNaN(S)&&(S=0),g=o+U(h,m,v,O,H,b,S),Math.abs(g-_)>q.CesiumMath.EPSILON12);n=i*(1+(e=v*(a*a-i*i)/(i*i))*(4096+e*(e*(320-175*e)-768))/16384)*(O-(n=e*(256+e*(e*(74-47*e)-128))/1024)*H*(S+n*(b*(2*(a=S*S)-1)-n*S*(4*H*H-3)*(4*a-3)/6)/4)),a=Math.atan2(d*f,c-M*p),r=Math.atan2(r*f,c*p-M),t._distance=n,t._startHeading=a,t._endHeading=r,t._uSquared=e}(t,n.maximumRadius,n.minimumRadius,a.longitude,a.latitude,i.longitude,i.latitude),t._start=O.Cartographic.clone(a,t._start),t._end=O.Cartographic.clone(i,t._end),t._start.height=0,t._end.height=0,s=(e=t)._uSquared,r=e._ellipsoid.maximumRadius,h=e._ellipsoid.minimumRadius,o=(r-h)/r,d=Math.cos(e._startHeading),u=Math.sin(e._startHeading),c=(1-o)*Math.tan(e._start.latitude),l=1/Math.sqrt(1+c*c),M=l*c,g=Math.atan2(c,d),f=1-(p=(_=l*u)*_),m=Math.sqrt(f),H=1-3*(v=s/4)+35*(C=v*v)/4,b=1-5*v,s=(i=1+v-3*C/4+5*(n=C*v)/4-175*(a=C*C)/64)*g-(t=1-v+15*C/8-35*n/8)*Math.sin(2*g)*v/2-H*Math.sin(4*g)*C/16-b*Math.sin(6*g)*n/48-5*Math.sin(8*g)*a/512,(e=e._constants).a=r,e.b=h,e.f=o,e.cosineHeading=d,e.sineHeading=u,e.tanU=c,e.cosineU=l,e.sineU=M,e.sigma=g,e.sineAlpha=_,e.sineSquaredAlpha=p,e.cosineSquaredAlpha=f,e.cosineAlpha=m,e.u2Over4=v,e.u4Over16=C,e.u6Over64=n,e.u8Over256=a,e.a0=i,e.a1=t,e.a2=H,e.a3=b,e.distanceRatio=s}function i(t,a,i){i=p.defaultValue(i,n.Ellipsoid.WGS84);this._ellipsoid=i,this._start=new O.Cartographic,this._end=new O.Cartographic,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,p.defined(t)&&p.defined(a)&&e(this,t,a,i)}Object.defineProperties(i.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return this._startHeading}},endHeading:{get:function(){return this._endHeading}}}),i.prototype.setEndPoints=function(t,a){e(this,t,a,this._ellipsoid)},i.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},i.prototype.interpolateUsingSurfaceDistance=function(t,a){var i=this._constants,n=i.distanceRatio+t/i.b,e=Math.cos(2*n),s=Math.cos(4*n),r=Math.cos(6*n),h=Math.sin(2*n),o=Math.sin(4*n),d=Math.sin(6*n),u=Math.sin(8*n),c=n*n,l=n*c,M=i.u8Over256,g=i.u2Over4,_=i.u6Over64,t=i.u4Over16,c=2*l*M*e/3+n*(1-g+7*t/4-15*_/4+579*M/64-(t-15*_/4+187*M/16)*e-(5*_/4-115*M/16)*s-29*M*r/16)+(g/2-t+71*_/32-85*M/16)*h+(5*t/16-5*_/4+383*M/96)*o-c*((_-11*M/2)*h+5*M*o/2)+(29*_/96-29*M/16)*d+539*M*u/1536,h=Math.asin(Math.sin(c)*i.cosineAlpha),o=Math.atan(i.a/i.b*Math.tan(h));c-=i.sigma;_=Math.cos(2*i.sigma+c),d=Math.sin(c),M=Math.cos(c),u=i.cosineU*M,h=i.sineU*d,_=Math.atan2(d*i.sineHeading,u-h*i.cosineHeading)-U(i.f,i.sineAlpha,i.cosineSquaredAlpha,c,d,M,_);return p.defined(a)?(a.longitude=this._start.longitude+_,a.latitude=o,a.height=0,a):new O.Cartographic(this._start.longitude+_,o,0)},t.EllipsoidGeodesic=i});
